(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["modules-myCompany-mySetup-mySetups-mySetup-phone"],{"0355":function(t,i,e){i=t.exports=e("2350")(!1),i.push([t.i,".my-title[data-v-35ba9cb6]{width:100%;height:%?88?%;background:#fff;border-bottom:%?2?% solid #f5f5f5;position:fixed;top:0;z-index:999}.quickBtn-Fd[data-v-35ba9cb6]{width:5%;margin-left:%?38?%}.search-Fd[data-v-35ba9cb6]{position:relative;width:100%;text-align:center;line-height:%?88?%;font-size:%?28?%;color:#2e2e30}.phoneBind-content[data-v-35ba9cb6]{position:fixed;width:100%;min-height:100vh;background:#fff;overflow:scroll}.MGT[data-v-35ba9cb6]{position:relative;width:100%;height:1.5vw;background:#f9f9f9}.phoneBind[data-v-35ba9cb6]{position:relative;width:100%;margin-top:%?100?%}.PB-top[data-v-35ba9cb6]{position:relative;padding:4vw;background:#fff}.PB-top .PB-top-v[data-v-35ba9cb6]{font-family:PingFangSC-Regular;font-size:%?32?%;color:#2e2e30;text-align:center;line-height:11vw}.phoneNum[data-v-35ba9cb6]{color:#02c2a2!important}.GH-PB[data-v-35ba9cb6]{position:relative;width:100%;font-family:PingFangSC-Regular;font-size:3.5vw;color:#9b9b9b;text-align:center}.PB-subStep[data-v-35ba9cb6]{position:relative;width:80%;margin:auto;margin-top:6vw}.substep[data-v-35ba9cb6]{position:relative;width:100%}.ST-items[data-v-35ba9cb6]{position:relative;width:50%}.ST-box[data-v-35ba9cb6]{position:relative;width:100%}.ST-box>p[data-v-35ba9cb6]{font-family:PingFangSC-Regular;font-size:3.5vw;color:#2e2e30;line-height:10vw;text-align:center}.yazm[data-v-35ba9cb6]{font-family:PingFangSC-Light;font-size:4vw;color:#ccc;line-height:12vw;text-align:right}.re-yazm[data-v-35ba9cb6]{font-family:PingFangSC-Light;font-size:4vw;color:#02c2a2;line-height:12vw;text-align:right}.ST-img[data-v-35ba9cb6]{position:relative;width:4.8vw;height:4.8vw;background:#d2d2d2;border-radius:50%;margin:auto}.ST-img>p[data-v-35ba9cb6]{width:4.8vw;font-family:PingFangSC-Regular;font-size:3.5vw;color:#fff;letter-spacing:0;text-align:center;line-height:4.8vw}.line-left[data-v-35ba9cb6]{position:absolute!important;right:4.8vw!important;top:2.4vw!important;width:16.5vw!important}.line-right[data-v-35ba9cb6]{position:absolute!important;left:4.8vw!important;top:2.4vw!important;width:16.5vw!important}.isST-view[data-v-35ba9cb6]{background:#24d5aa!important}.isST-line[data-v-35ba9cb6]{background:#24d5aa!important}.isST-p[data-v-35ba9cb6]{color:#24d5aa!important}.input-PB[data-v-35ba9cb6]{position:relative;width:90%;background:#fff;height:%?140?%}.input-PB-box[data-v-35ba9cb6]{position:relative;padding:4vw;width:100%}.inputYan-PLR[data-v-35ba9cb6]{position:relative;width:100%;margin-top:6vw}.yan-left-PLR[data-v-35ba9cb6]{position:relative;width:60%}.ma-right-PLR[data-v-35ba9cb6]{position:relative;width:40%}.ma-right-PLR>p[data-v-35ba9cb6]{font-family:PingFangSC-Light;font-size:4vw;color:#02c2a2;line-height:12vw;text-align:right}.btn-RB[data-v-35ba9cb6]{position:relative;padding:4vw;margin-top:6vw}.btn-RB>p[data-v-35ba9cb6]{background:#02c2a2;text-align:center;font-family:PingFangSC-Regular;font-size:4.266vw;color:#fff;letter-spacing:0;line-height:12vw}.btn-RB2[data-v-35ba9cb6]{position:relative;padding:4vw;margin-top:6vw;opacity:.5}.btn-RB2>p[data-v-35ba9cb6]{background:#02c2a2;text-align:center;font-family:PingFangSC-Regular;font-size:4.266vw;color:#fff;letter-spacing:0;line-height:12vw}",""])},5629:function(t,i,e){"use strict";var n=e("e192"),a=e.n(n);a.a},"8eef":function(t,i,e){"use strict";e.r(i);var n=e("e865"),a=e("cede");for(var o in a)"default"!==o&&function(t){e.d(i,t,function(){return a[t]})}(o);e("5629");var s=e("2877"),r=Object(s["a"])(a["default"],n["a"],n["b"],!1,null,"35ba9cb6",null);i["default"]=r.exports},cede:function(t,i,e){"use strict";e.r(i);var n=e("e2ab"),a=e.n(n);for(var o in n)"default"!==o&&function(t){e.d(i,t,function(){return n[t]})}(o);i["default"]=a.a},e192:function(t,i,e){var n=e("0355");"string"===typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);var a=e("4f06").default;a("64723ba9",n,!0,{sourceMap:!1,shadowMode:!1})},e2ab:function(t,i,e){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var n=r(e("a76f")),a=r(e("270e")),o=r(e("9063")),s=e("2f62");function r(t){return t&&t.__esModule?t:{default:t}}function c(t){for(var i=1;i<arguments.length;i++){var e=null!=arguments[i]?arguments[i]:{},n=Object.keys(e);"function"===typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(e).filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.forEach(function(i){l(t,i,e[i])})}return t}function l(t,i,e){return i in t?Object.defineProperty(t,i,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[i]=e,t}var u={name:"phoneBind",data:function(){return{UserData:{},phoneLand:{phone:"",code:"",passWord:""},isShow:!0,loadingShow:!1,isOvertime:!1,word:"发送验证码",setPassWorld:!1}},components:{wInput:n.default,quickBtn:a.default,navigation:o.default},computed:c({i18n:function(){return this.$t("Mypersonal")}},(0,s.mapGetters)(["GET_HOME","QUICKNAVCO","GET_MY"])),created:function(){uni.getStorageSync("UserData")&&(this.UserData=JSON.parse(uni.getStorageSync("UserData"))),this.getmy()},mounted:function(){},methods:c({},(0,s.mapMutations)({setheader:"setheader",setMation:"setMation"}),{clickStep:function(t){console.log("触发步进器"),1===t&&!0!==this.isShow&&(this.isShow=!this.isShow),2===t&&this.clickNextStep()},sendMessage:function(){if(this.isOvertime)return!1;this.getCode()},sendState:function(){var t=this,i=60,e=setInterval(function(){t.isOvertime=!0,i--,t.word="重新获取("+i+"s)",i<0&&(t.isOvertime=!1,clearInterval(e),t.word="获取验证码")},1e3)},getCode:function(){var t=this;uni.showLoading({title:"加载中"});var i={phone:this.phoneLand.phone,businessName:"1",portal:"iambuyer"};uni.request({url:this.api1+"/rest-sso/phoneSms",data:i,method:"POST",success:function(i){console.log(i.data),"200"===i.data.ret?(uni.hideLoading(),uni.showToast({title:"短信发送成功",icon:"none",duration:1e3}),t.sendState()):(uni.hideLoading(),uni.showToast({title:i.data.msg,icon:"none",duration:1e3}))},fail:function(t){uni.hideLoading(),uni.showToast({title:"网络繁忙，请稍后",icon:"none",duration:1e3}),console.log(t,"网络繁忙，请稍后")}})},clickNextStep:function(){console.log("触发下一步");var t=this.phoneLand.phone;return""===t?(uni.showToast({title:"手机号为不能为空",icon:"none",duration:1e3}),!1):/^1[34578]\d{9}$/.test(t)?t===this.GET_MY.headers.userPhone?(uni.showToast({title:"不能和当前已经绑定的手机号相同",icon:"none",duration:1e3}),!1):void(this.isShow=!this.isShow):(uni.showToast({title:"手机号码有误,请重填",icon:"none",duration:1e3}),!1)},clickUpData:function(){var t=this;console.log("触发完成绑定");var i={phone:this.phoneLand.phone,businessName:"1",phoneCode:this.phoneLand.code,portal:"iambuyer"};if(uni.getStorageSync("landRegist")){var e=JSON.parse(uni.getStorageSync("landRegist"));console.log(e.user.id),uni.showLoading({title:"加载中"}),uni.request({url:this.api1+"/rest-sso/phoneSmsVali",data:i,method:"POST",success:function(i){"200"===i.data.ret?(uni.hideLoading(),uni.showToast({title:"验证码校验成功！",icon:"none",duration:1e3}),t.addjiao()):(uni.hideLoading(),uni.showToast({title:i.data.msg,icon:"none",duration:1e3}))},fail:function(t){uni.hideLoading(),uni.showToast({title:"网络繁忙，请稍后",icon:"none",duration:1e3}),console.log(t,"网络繁忙，请稍后")}})}},addjiao:function(){var t=this;if(uni.getStorageSync("landRegist")){var i=JSON.parse(uni.getStorageSync("landRegist"));console.log(i.user.id);var e={userPhone:this.phoneLand.phone};uni.showLoading({title:"加载中"}),uni.request({url:this.api2+"/rest-rp/user/"+i.user.id,data:e,method:"POST",header:{Authorization:"Bearer "+i.token},success:function(i){uni.hideLoading(),console.log(i.data),400==i.data.ret?(uni.showToast({title:i.data.msg,icon:"none",duration:1e3}),t.isShow=!0):(uni.showToast({title:"修改成功",icon:"none",duration:1e3}),t.getmy(),uni.navigateBack({}))},fail:function(t){uni.hideLoading(),uni.showToast({title:"网络繁忙，请稍后",icon:"none",duration:1e3}),console.log(t,"网络繁忙，请稍后")}})}},getmy:function(){var t=this;if(uni.getStorageSync("landRegist")){var i=JSON.parse(uni.getStorageSync("landRegist"));console.log(i.user.id);uni.showLoading({title:"加载中"}),uni.request({url:this.api2+"/rest-rp/user/"+i.user.id,method:"GET",header:{Authorization:"Bearer "+i.token},success:function(i){uni.hideLoading(),t.list=i.data.content,t.$store.commit("setMy",t.list)},fail:function(t){uni.hideLoading(),uni.showToast({title:"网络繁忙，请稍后",icon:"none",duration:1e3}),console.log(t,"网络繁忙，请稍后")}})}}})};i.default=u},e865:function(t,i,e){"use strict";var n=function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("v-uni-view",{staticClass:"phoneBind-content"},[e("v-uni-view",{staticClass:"my-title"},[e("div",{staticClass:"quickBtn-Fd left"},[e("quickBtn")],1),e("div",{staticClass:"search-Fd left"},[t._v(t._s(t.i18n.title20))])]),e("v-uni-view",{staticClass:"phoneBind"},[e("v-uni-view",{staticClass:"PB-top"},[e("v-uni-view",{staticClass:"PB-top-v"},[t._v("您当前绑定的手机号码为："),e("span",{staticClass:"phoneNum"},[t._v(t._s(t.GET_MY.headers.userPhone))])]),e("v-uni-view",{staticClass:"GH-PB"},[t._v("更换后可用新手机号登录")]),e("v-uni-view",{staticClass:"PB-subStep"},[e("v-uni-view",{staticClass:"substep"},[e("v-uni-view",{staticClass:"ST-items left"},[e("v-uni-view",{staticClass:"ST-box",on:{click:function(i){i=t.$handleEvent(i),t.clickStep(1)}}},[e("v-uni-view",{staticClass:"ST-img isST-view"},[e("p",{},[t._v("1")]),e("v-uni-view",{staticClass:"line line-right isST-line"})],1),e("p",{staticClass:"isST-p"},[t._v("输入新手机号")])],1)],1),e("v-uni-view",{staticClass:"ST-items left"},[e("v-uni-view",{staticClass:"ST-box",on:{click:function(i){i=t.$handleEvent(i),t.clickStep(2)}}},[e("v-uni-view",{staticClass:"ST-img",class:t.isShow?"":"isST-view"},[e("p",{},[t._v("2")]),e("v-uni-view",{staticClass:"line line-left ",class:t.isShow?"":"isST-line"})],1),e("p",{class:t.isShow?"":"isST-p"},[t._v("验证并绑定")])],1)],1),e("v-uni-view",{staticClass:"clear"})],1)],1)],1),e("v-uni-view",{staticClass:"MGT"}),e("v-uni-view",{staticClass:"input-PB"},[e("v-uni-view",{directives:[{name:"show",rawName:"v-show",value:t.isShow,expression:"isShow"}],staticClass:"input-PB-box"},[e("wInput",{attrs:{type:"number",maxlength:"11",placeholder:"请输入要绑定的手机号"},model:{value:t.phoneLand.phone,callback:function(i){t.$set(t.phoneLand,"phone",i)},expression:"phoneLand.phone"}}),e("v-uni-view",{staticClass:"line"})],1),t.isShow?t._e():e("v-uni-view",{staticClass:"input-PB-box"},[e("v-uni-view",{staticClass:"yan-left-PLR left"},[e("wInput",{attrs:{type:"number",maxlength:"4",placeholder:"请输入验证码"},model:{value:t.phoneLand.code,callback:function(i){t.$set(t.phoneLand,"code",i)},expression:"phoneLand.code"}})],1),e("v-uni-view",{staticClass:"ma-right-PLR left"},[e("v-uni-view",{class:{yazm:t.isOvertime,"re-yazm":!t.isOvertime},on:{click:function(i){i=t.$handleEvent(i),t.sendMessage(i)}}},[t._v(t._s(t.word))])],1),e("v-uni-view",{staticClass:"clear"}),e("v-uni-view",{staticClass:"line"})],1)],1),e("v-uni-view",{},[t.isShow?e("v-uni-view",{class:t.phoneLand.phone?"btn-RB":"btn-RB2",on:{click:function(i){i=t.$handleEvent(i),t.clickNextStep(i)}}},[e("p",{},[t._v("下一步")])]):t._e(),t.isShow?t._e():e("v-uni-view",{class:t.phoneLand.phone&&t.phoneLand.code?"btn-RB":"btn-RB2",on:{click:function(i){i=t.$handleEvent(i),t.clickUpData(i)}}},[e("p",{},[t._v("完成绑定")])])],1)],1),t.QUICKNAVCO.show?e("navigation"):t._e()],1)},a=[];e.d(i,"a",function(){return n}),e.d(i,"b",function(){return a})}}]);