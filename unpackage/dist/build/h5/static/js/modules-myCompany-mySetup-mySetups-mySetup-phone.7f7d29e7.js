(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["modules-myCompany-mySetup-mySetups-mySetup-phone"],{"0b73":function(t,i,e){"use strict";(function(t){var n=e("288e");Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var a=n(e("cebc")),o=n(e("2a48")),s=n(e("2de2")),d=n(e("5a67")),r=e("2f62"),l={name:"phoneBind",data:function(){return{UserData:{},width:"100%",phoneLand:{phone:"",code:"",passWord:""},isShow:!0,loadingShow:!1,isOvertime:!1,word:"发送验证码",setPassWorld:!1}},components:{wInput:o.default,quickBtn:s.default,navigation:d.default},computed:(0,a.default)({i18n:function(){return this.$t("Mypersonal")}},(0,r.mapGetters)(["GET_HOME","QUICKNAVCO","GET_MY"])),created:function(){uni.getStorageSync("UserData")&&(this.UserData=JSON.parse(uni.getStorageSync("UserData"))),this.getmy()},mounted:function(){},methods:(0,a.default)({},(0,r.mapMutations)({setheader:"setheader",setMation:"setMation"}),{clickStep:function(i){t.log("触发步进器"),1===i&&!0!==this.isShow&&(this.isShow=!this.isShow),2===i&&this.clickNextStep()},sendMessage:function(){if(this.isOvertime)return!1;this.getCode()},sendState:function(){var t=this,i=60,e=setInterval(function(){t.isOvertime=!0,i--,t.word="重新获取("+i+"s)",i<0&&(t.isOvertime=!1,clearInterval(e),t.word="获取验证码")},1e3)},getCode:function(){var i=this;uni.showLoading({title:"加载中"});var e={phone:this.phoneLand.phone,businessName:"1",portal:"iambuyer"};uni.request({url:this.api1+"/rest-sso/phoneSms",data:e,method:"POST",success:function(e){t.log(e.data),"200"===e.data.ret?(uni.hideLoading(),uni.showToast({title:"短信发送成功",icon:"none",duration:1e3}),i.sendState()):(uni.hideLoading(),uni.showToast({title:e.data.msg,icon:"none",duration:1e3}))},fail:function(i){uni.hideLoading(),uni.showToast({title:"网络繁忙，请稍后",icon:"none",duration:1e3}),t.log(i,"网络繁忙，请稍后")}})},clickNextStep:function(){t.log("触发下一步");var i=this.phoneLand.phone;return""===i?(uni.showToast({title:"手机号为不能为空",icon:"none",duration:1e3}),!1):/^1[34578]\d{9}$/.test(i)?i===this.GET_MY.headers.userPhone?(uni.showToast({title:"不能和当前已经绑定的手机号相同",icon:"none",duration:1e3}),!1):void(this.isShow=!this.isShow):(uni.showToast({title:"手机号码有误,请重填",icon:"none",duration:1e3}),!1)},clickUpData:function(){var i=this;t.log("触发完成绑定");var e={phone:this.phoneLand.phone,businessName:"1",phoneCode:this.phoneLand.code,portal:"iambuyer"};if(uni.getStorageSync("landRegist")){var n=JSON.parse(uni.getStorageSync("landRegist"));t.log(n.user.id),uni.showLoading({title:"加载中"}),uni.request({url:this.api1+"/rest-sso/phoneSmsVali",data:e,method:"POST",success:function(t){"200"===t.data.ret?(uni.hideLoading(),uni.showToast({title:"验证码校验成功！",icon:"none",duration:1e3}),i.addjiao()):(uni.hideLoading(),uni.showToast({title:t.data.msg,icon:"none",duration:1e3}))},fail:function(i){uni.hideLoading(),uni.showToast({title:"网络繁忙，请稍后",icon:"none",duration:1e3}),t.log(i,"网络繁忙，请稍后")}})}},addjiao:function(){var i=this;if(uni.getStorageSync("landRegist")){var e=JSON.parse(uni.getStorageSync("landRegist"));t.log(e.user.id);var n={userPhone:this.phoneLand.phone};uni.showLoading({title:"加载中"}),uni.request({url:this.api2+"/rest-rp/user/"+e.user.id,data:n,method:"POST",header:{Authorization:"Bearer "+e.token},success:function(e){uni.hideLoading(),t.log(e.data),400==e.data.ret?(uni.showToast({title:e.data.msg,icon:"none",duration:1e3}),i.isShow=!0):(uni.showToast({title:"修改成功",icon:"none",duration:1e3}),i.getmy(),uni.navigateBack({}))},fail:function(i){uni.hideLoading(),uni.showToast({title:"网络繁忙，请稍后",icon:"none",duration:1e3}),t.log(i,"网络繁忙，请稍后")}})}},getmy:function(){var i=this;if(uni.getStorageSync("landRegist")){var e=JSON.parse(uni.getStorageSync("landRegist"));t.log(e.user.id);uni.showLoading({title:"加载中"}),uni.request({url:this.api2+"/rest-rp/user/"+e.user.id,method:"GET",header:{Authorization:"Bearer "+e.token},success:function(t){uni.hideLoading(),i.list=t.data.content,i.$store.commit("setMy",i.list)},fail:function(i){uni.hideLoading(),uni.showToast({title:"网络繁忙，请稍后",icon:"none",duration:1e3}),t.log(i,"网络繁忙，请稍后")}})}}})};i.default=l}).call(this,e("5a52")["default"])},"465f":function(t,i,e){i=t.exports=e("2350")(!1),i.push([t.i,".my-title[data-v-77132b0b]{width:100%;height:%?88?%;background:#fff;border-bottom:%?2?% solid #f5f5f5;position:fixed;top:0;z-index:999}.quickBtn-Fd[data-v-77132b0b]{width:5%;margin-left:%?38?%}.search-Fd[data-v-77132b0b]{position:relative;width:100%;text-align:center;line-height:%?88?%;font-size:%?28?%;color:#2e2e30}.phoneBind-content[data-v-77132b0b]{position:fixed;width:100%;min-height:100vh;background:#fff;overflow:scroll}.MGT[data-v-77132b0b]{position:relative;width:100%;height:1.5vw;background:#f9f9f9}.phoneBind[data-v-77132b0b]{position:relative;width:100%;margin-top:%?100?%}.PB-top[data-v-77132b0b]{position:relative;padding:4vw;background:#fff}.PB-top .PB-top-v[data-v-77132b0b]{font-family:PingFangSC-Regular;font-size:%?32?%;color:#2e2e30;text-align:center;line-height:11vw}.phoneNum[data-v-77132b0b]{color:#02c2a2!important}.GH-PB[data-v-77132b0b]{position:relative;width:100%;font-family:PingFangSC-Regular;font-size:3.5vw;color:#9b9b9b;text-align:center}.PB-subStep[data-v-77132b0b]{position:relative;width:80%;margin:auto;margin-top:6vw}.substep[data-v-77132b0b]{position:relative;width:100%}.ST-items[data-v-77132b0b]{position:relative;width:50%}.ST-box[data-v-77132b0b]{position:relative;width:100%}.ST-box>p[data-v-77132b0b]{font-family:PingFangSC-Regular;font-size:3.5vw;color:#2e2e30;line-height:10vw;text-align:center}.yazm[data-v-77132b0b]{font-family:PingFangSC-Light;font-size:4vw;color:#ccc;line-height:12vw;text-align:right}.re-yazm[data-v-77132b0b]{font-family:PingFangSC-Light;font-size:4vw;color:#02c2a2;line-height:12vw;text-align:right}.ST-img[data-v-77132b0b]{position:relative;width:4.8vw;height:4.8vw;background:#d2d2d2;border-radius:50%;margin:auto}.ST-img>p[data-v-77132b0b]{width:4.8vw;font-family:PingFangSC-Regular;font-size:3.5vw;color:#fff;letter-spacing:0;text-align:center;line-height:4.8vw}.line-left[data-v-77132b0b]{position:absolute!important;right:4.8vw!important;top:2.4vw!important;width:16.5vw!important}.line-right[data-v-77132b0b]{position:absolute!important;left:4.8vw!important;top:2.4vw!important;width:16.5vw!important}.isST-view[data-v-77132b0b]{background:#24d5aa!important}.isST-line[data-v-77132b0b]{background:#24d5aa!important}.isST-p[data-v-77132b0b]{color:#24d5aa!important}.input-PB[data-v-77132b0b]{position:relative;width:90%;background:#fff;height:%?140?%}.input-PB-box[data-v-77132b0b]{position:relative;padding:4vw;width:100%}.inputYan-PLR[data-v-77132b0b]{position:relative;width:100%;margin-top:6vw}.yan-left-PLR[data-v-77132b0b]{position:relative;width:60%}.ma-right-PLR[data-v-77132b0b]{position:relative;width:40%}.ma-right-PLR>p[data-v-77132b0b]{font-family:PingFangSC-Light;font-size:4vw;color:#02c2a2;line-height:12vw;text-align:right}.btn-RB[data-v-77132b0b]{position:relative;padding:4vw;margin-top:6vw}.btn-RB>p[data-v-77132b0b]{background:#02c2a2;text-align:center;font-family:PingFangSC-Regular;font-size:4.266vw;color:#fff;letter-spacing:0;line-height:12vw}.btn-RB2[data-v-77132b0b]{position:relative;padding:4vw;margin-top:6vw;opacity:.5}.btn-RB2>p[data-v-77132b0b]{background:#02c2a2;text-align:center;font-family:PingFangSC-Regular;font-size:4.266vw;color:#fff;letter-spacing:0;line-height:12vw}",""])},"5a1d":function(t,i,e){var n=e("465f");"string"===typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);var a=e("4f06").default;a("23f8ab5a",n,!0,{sourceMap:!1,shadowMode:!1})},"699d":function(t,i,e){"use strict";e.r(i);var n=e("0b73"),a=e.n(n);for(var o in n)"default"!==o&&function(t){e.d(i,t,function(){return n[t]})}(o);i["default"]=a.a},"7f93":function(t,i,e){"use strict";e.r(i);var n=e("8aaf"),a=e("699d");for(var o in a)"default"!==o&&function(t){e.d(i,t,function(){return a[t]})}(o);e("8a8a");var s=e("2877"),d=Object(s["a"])(a["default"],n["a"],n["b"],!1,null,"77132b0b",null);i["default"]=d.exports},"8a8a":function(t,i,e){"use strict";var n=e("5a1d"),a=e.n(n);a.a},"8aaf":function(t,i,e){"use strict";var n=function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("v-uni-view",{staticClass:"phoneBind-content"},[e("v-uni-view",{staticClass:"my-title"},[e("div",{staticClass:"quickBtn-Fd left"},[e("quickBtn")],1),e("div",{staticClass:"search-Fd left"},[t._v(t._s(t.i18n.title20))])]),e("v-uni-view",{staticClass:"phoneBind"},[e("v-uni-view",{staticClass:"PB-top"},[e("v-uni-view",{staticClass:"PB-top-v"},[t._v("您当前绑定的手机号码为："),e("span",{staticClass:"phoneNum"},[t._v(t._s(t.GET_MY.headers.userPhone))])]),e("v-uni-view",{staticClass:"GH-PB"},[t._v("更换后可用新手机号登录")]),e("v-uni-view",{staticClass:"PB-subStep"},[e("v-uni-view",{staticClass:"substep"},[e("v-uni-view",{staticClass:"ST-items left"},[e("v-uni-view",{staticClass:"ST-box",on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.clickStep(1)}}},[e("v-uni-view",{staticClass:"ST-img isST-view"},[e("p",{},[t._v("1")]),e("v-uni-view",{staticClass:"line line-right isST-line"})],1),e("p",{staticClass:"isST-p"},[t._v("输入新手机号")])],1)],1),e("v-uni-view",{staticClass:"ST-items left"},[e("v-uni-view",{staticClass:"ST-box",on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.clickStep(2)}}},[e("v-uni-view",{staticClass:"ST-img",class:t.isShow?"":"isST-view"},[e("p",{},[t._v("2")]),e("v-uni-view",{staticClass:"line line-left ",class:t.isShow?"":"isST-line"})],1),e("p",{class:t.isShow?"":"isST-p"},[t._v("验证并绑定")])],1)],1),e("v-uni-view",{staticClass:"clear"})],1)],1)],1),e("v-uni-view",{staticClass:"MGT"}),e("v-uni-view",{staticClass:"input-PB"},[e("v-uni-view",{directives:[{name:"show",rawName:"v-show",value:t.isShow,expression:"isShow"}],staticClass:"input-PB-box"},[e("wInput",{attrs:{inputWidth:t.width,type:"number",maxlength:"11",placeholder:"请输入要绑定的手机号"},model:{value:t.phoneLand.phone,callback:function(i){t.$set(t.phoneLand,"phone",i)},expression:"phoneLand.phone"}}),e("v-uni-view",{staticClass:"line"})],1),t.isShow?t._e():e("v-uni-view",{staticClass:"input-PB-box"},[e("v-uni-view",{staticClass:"yan-left-PLR left"},[e("wInput",{attrs:{inputWidth:t.width,type:"number",maxlength:"4",placeholder:"请输入验证码"},model:{value:t.phoneLand.code,callback:function(i){t.$set(t.phoneLand,"code",i)},expression:"phoneLand.code"}})],1),e("v-uni-view",{staticClass:"ma-right-PLR left"},[e("v-uni-view",{class:{yazm:t.isOvertime,"re-yazm":!t.isOvertime},on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.sendMessage.apply(void 0,arguments)}}},[t._v(t._s(t.word))])],1),e("v-uni-view",{staticClass:"clear"}),e("v-uni-view",{staticClass:"line"})],1)],1),e("v-uni-view",{},[t.isShow?e("v-uni-view",{class:t.phoneLand.phone?"btn-RB":"btn-RB2",on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.clickNextStep.apply(void 0,arguments)}}},[e("p",{},[t._v("下一步")])]):t._e(),t.isShow?t._e():e("v-uni-view",{class:t.phoneLand.phone&&t.phoneLand.code?"btn-RB":"btn-RB2",on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.clickUpData.apply(void 0,arguments)}}},[e("p",{},[t._v("完成绑定")])])],1)],1),t.QUICKNAVCO.show?e("navigation"):t._e()],1)},a=[];e.d(i,"a",function(){return n}),e.d(i,"b",function(){return a})}}]);