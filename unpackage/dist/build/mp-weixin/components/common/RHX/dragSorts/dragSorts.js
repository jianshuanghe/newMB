(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["components/common/RHX/dragSorts/dragSorts"],{"0511":function(t,r,e){"use strict";var i=e("4eed"),n=e.n(i);n.a},"17dd":function(t,r,e){"use strict";e.r(r);var i=e("6428"),n=e.n(i);for(var o in i)"default"!==o&&function(t){e.d(r,t,function(){return i[t]})}(o);r["default"]=n.a},"4eed":function(t,r,e){},6428:function(t,r,e){"use strict";(function(t){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var i=n(e("ff23"));function n(t){return t&&t.__esModule?t:{default:t}}function o(t){for(var r=1;r<arguments.length;r++){var e=null!=arguments[r]?arguments[r]:{},i=Object.keys(e);"function"===typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(e).filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.forEach(function(r){s(t,r,e[r])})}return t}function s(t,r,e){return r in t?Object.defineProperty(t,r,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[r]=e,t}var c=function(){return Promise.all([e.e("common/vendor"),e.e("components/common/RHX/moduleIconLibrary/moduleIconLibrary")]).then(e.bind(null,"0f2f"))},u=function(){return Promise.all([e.e("common/vendor"),e.e("components/common/RHX/moduleItems/moduleItems")]).then(e.bind(null,"b8d5"))},a={name:"drag-sort",mixins:[],components:{moduleIconLibrary:c,moduleItems:u},data:function(){return{dragSortRefresh:!0,iconLibrary:-1,iconLibraryShow:!1,dataLists:this.dataList,isSelect:-1,iconSrc:i.default,old:{tapIndex:-1},disable:this.disabled,styleObject:{color:"red",fontSize:"13px",borderTop:"0.5px solid #E2E2E2"},style:{background:"red"},direction:"all",windowWidth:100,height:60,currentList:[],active:-1,index:0,topY:0,topX:0,deviationX:0,deviationY:0}},computed:{boxHeight:function(){return 0!==this.list.length?!0===this.iconLibraryShow?Math.ceil(Number(this.list.length)/1)*this.height+114+"px":Math.ceil(Number(this.list.length)/1)*this.height+"px":0}},props:["disabled","selIconList","list","boxStyle","pickerCancel"],watch:{list:{handler:function(){this.onUpdateCurrentList()},deep:!0},disabled:{handler:function(t,r){console.log(t,r),this.disable=t},deep:!0},pickerCancel:{handler:function(t,r){console.log(t,r,"-----------pickerCancel--------"),!1===t&&this.currentList.map(function(t,r){t.isShow=1})},deep:!0}},created:function(){var r=t.getSystemInfoSync();this.windowWidth=r.windowWidth,this.onUpdateCurrentList()},mounted:function(){},updated:function(){},filters:{},beforeDestroy:function(){console.log("页面销毁之前清除缓存数据--------------currentList")},methods:{onUpdateCurrentList:function(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.list,e=[];for(var i in r){var n=Math.ceil((Number(i)+1)/1)-1,s=0;e.push(o({},r[i],{isShow:1,index:Number(i),SortNumber:Number(i),y:n*this.height,x:s,animation:!0}))}this.currentList=e;var c=JSON.parse(JSON.stringify(this.currentList));c.sort(function(t,r){return t.SortNumber-r.SortNumber}),t.setStorageSync("currentList",c)},moveUpdateCurrentList:function(t){for(var r in this.currentList){var e=void 0;e=this.currentList[r].SortNumber||0===this.currentList[r].SortNumber?this.currentList[r].SortNumber:Number(r);o({},this.currentList[r]);this.currentList[r].y=(Math.ceil((Number(e)+1)/1)-1)*this.height}},touchstart:function(r){var e=this,i=t.createSelectorQuery().in(this);i.select("#drag").boundingClientRect(),i.exec(function(t){e.topY=t[0].top;var i=r.mp.touches[0].clientY-t[0].top;e.deviationY=i%e.height,e.active=Number(r.currentTarget.dataset.index),e.index=Number(r.currentTarget.dataset.index)})},touchmove:function(t){var r=this;if(this.iconLibrary=-1,this.iconLibraryShow=!1,!(this.active<0)){var e=t.mp.touches[0].clientY-this.topY,i=e-0;this.currentList[this.active].y=i,this.currentList[this.active].animation=!1,this.currentList.every(function(t,e){var n=Math.abs(i-t.y);if(n>0&&n<=10&&r.active!=e){var o=r.currentList[e].SortNumber;return r.currentList.every(function(t,i){return r.currentList[r.active].SortNumber<r.currentList[e].SortNumber?r.currentList[i].SortNumber>r.currentList[r.active].SortNumber&&r.currentList[i].SortNumber<=r.currentList[e].SortNumber&&t.SortNumber--:r.currentList[i].SortNumber<r.currentList[r.active].SortNumber&&r.currentList[i].SortNumber>=r.currentList[e].SortNumber&&t.SortNumber++,!0},r),r.currentList[r.active].SortNumber=o,r.moveUpdateCurrentList(o),!1}return!0},this)}},touchend:function(r){this.currentList[this.active]&&(this.currentList[this.active].animation=!0),this.moveUpdateCurrentList(-1),this.active=-1;var e=JSON.parse(JSON.stringify(this.currentList));e.sort(function(t,r){return t.SortNumber-r.SortNumber}),t.setStorageSync("currentList",e)},tapModuleItems:function(r){console.log(r,"触发tapModuleItems"),console.log(this.currentList,"---------------this.currentList-------------"),this.currentList.map(function(t,e){t.SortNumber===r[1]&&(t.iconTitle=r[0])});var e=JSON.parse(JSON.stringify(this.currentList));e.sort(function(t,r){return t.SortNumber-r.SortNumber}),t.setStorageSync("currentList",e)},tapModuleItemsIcon:function(t){console.log(t,"触发点击子项的index----原始值"),console.log(this.iconLibraryShow,"-------------------------this.iconLibraryShow-----------------------"),!1===this.iconLibraryShow?(this.iconLibraryShow=!0,this.iconLibrary=t,this.isSelect=t,this.old.tapIndex=t,console.log(t,"------------------所在index------------------"),this.currentList.sort(function(t,r){return t.SortNumber-r.SortNumber}),console.log(this.currentList[t],"--------------------修改后的this.currentList-------------------"),this.currentList.map(function(r,e){t===e===0&&(r.y=r.y),e>t&&(r.y=r.y+114)})):!0===this.iconLibraryShow&&(console.log(t,this.old.tapIndex,"----------------------------e, this.this.old.tapIndex--------------------------"),t===this.old.tapIndex?(console.log("关闭上一次打开的"),this.iconLibraryShow=!1,this.iconLibrary=-1,this.isSelect=-1,this.old.tapIndex=-1):(console.log("关闭上一次打开的,并且打开新的"),this.iconLibraryShow=!0,this.iconLibrary=t,this.isSelect=t,this.old.tapIndex=t,console.log(t,"------------------所在index------------------"),this.currentList.sort(function(t,r){return t.SortNumber-r.SortNumber}),console.log(this.currentList[t],"--------------------修改后的this.currentList-------------------"),this.currentList.map(function(r,e){t===e===0&&(r.y=r.y),e>t&&(r.y=r.y+114)})))},tapModuleItemsDel:function(r){var e=this;this.iconLibrary=-1,this.iconLibraryShow=!1,console.log(r,"我是删除的index 的SortNumber"),this.currentList.sort(function(t,r){return t.SortNumber-r.SortNumber}),console.log(this.currentList[r],"--------------------修改后的this.currentList-------------------"),console.log(this.currentList[r].SortNumber),this.currentList.map(function(t,i){t.SortNumber===r&&(e.dragSortRefresh=!1,e.$nextTick(function(){this.dragSortRefresh=!0}))}),this.moveUpdateCurrentList(-1),this.currentList.length>0&&(this.currentList[r].isShow=0);var i=this.currentList;console.log(i,"------------------删除后数据--------------------"),console.log(this.currentList,"重排序");var n=JSON.parse(JSON.stringify(this.currentList));n.sort(function(t,r){return t.SortNumber-r.SortNumber}),t.setStorageSync("currentList",n),t.showToast({title:"成功！",icon:"none",duration:500})},tapModuleIconLibrary:function(r){var e=this;console.log(r,"用户选择的新icon"),this.currentList.map(function(t,i){i===e.old.tapIndex&&(t.icon=r)});var i=this.currentList;this.currentList.sort(function(t,r){return t.SortNumber-r.SortNumber}),this.$emit("tab-DragSortChange",i),this.iconLibraryShow=!1,this.iconLibrary=-1,this.isSelect=-1,this.old.tapIndex=-1,t.showToast({title:"替换成功！",icon:"none",duration:500})}}};r.default=a}).call(this,e("543d")["default"])},6575:function(t,r,e){"use strict";var i=function(){var t=this,r=t.$createElement;t._self._c},n=[];e.d(r,"a",function(){return i}),e.d(r,"b",function(){return n})},"8c87":function(t,r,e){"use strict";e.r(r);var i=e("6575"),n=e("17dd");for(var o in n)"default"!==o&&function(t){e.d(r,t,function(){return n[t]})}(o);e("0511");var s=e("2877"),c=Object(s["a"])(n["default"],i["a"],i["b"],!1,null,"524d0b0f",null);r["default"]=c.exports}}]);
;(global["webpackJsonp"] = global["webpackJsonp"] || []).push([
    'components/common/RHX/dragSorts/dragSorts-create-component',
    {
        'components/common/RHX/dragSorts/dragSorts-create-component':(function(module, exports, __webpack_require__){
            __webpack_require__('543d')['createComponent'](__webpack_require__("8c87"))
        })
    },
    [['components/common/RHX/dragSorts/dragSorts-create-component']]
]);
