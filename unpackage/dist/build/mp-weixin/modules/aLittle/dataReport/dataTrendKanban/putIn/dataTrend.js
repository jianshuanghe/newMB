(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["modules/aLittle/dataReport/dataTrendKanban/putIn/dataTrend"],{2917:function(t,e,n){"use strict";n.r(e);var i=n("72c2"),a=n("5384");for(var s in a)"default"!==s&&function(t){n.d(e,t,function(){return a[t]})}(s);n("39c3");var r=n("2877"),o=Object(r["a"])(a["default"],i["a"],i["b"],!1,null,null,null);e["default"]=o.exports},"39c3":function(t,e,n){"use strict";var i=n("7e7b"),a=n.n(i);a.a},"3b2e":function(t,e,n){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i,a=d(n("5f85")),s=n("18f3"),r=d(n("20e8")),o=n("2f62");function d(t){return t&&t.__esModule?t:{default:t}}function h(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},i=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(n).filter(function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable}))),i.forEach(function(e){l(t,e,n[e])})}return t}function l(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var g=null,c=function(){return Promise.all([n.e("common/vendor"),n.e("modules/aLittle/dataReport/dataTrendKanban/liuLiang/customTime")]).then(n.bind(null,"9442"))},m={components:{customTime:c},data:function(){return{clickItemsIndex:7,tabList:[{code:1,text:"昨天"},{code:7,text:"近七日"},{code:30,text:"近30日"},{code:"001",text:"自定义时间"}],trendKanBanText:{kanBanText:"近七日",trendLeftText:"总消耗",trendRightText:"展示数",kanBanTime:7,trendLeft:"0",trendRight:"1"},customTime2:{show:!1,selectTime:!1},trendKanban:{kanBanText:"近七日",trendLeftText:"点击数",trendRightText:"总消耗",kanBanTime:7,trendLeft:"0",trendRight:"1"},dataTrendKanban:{userId:"",starTime:"",endTime:"",instIds:""},dataTime:{starTime:"",endTime:""},isCustomTime:!1,startDate:new Date("2018-01-01"),endDate:new Date,dataTrend:{lineType0:"2",lineType1:"0"},cWidth:"690upx.",cHeight:"",pixelRatio:1,textarea:"",rightArrow:r.default,itemList2:[],LineA:{categories:["2019-09-17","2019-09-18","2019-09-19","2019-09-20","2019-09-21"],series:[{name:"总消耗",legendShape:"circle",data:[23,10,30,15,60]},{name:"展示数",legendShape:"circle",data:[10,69,60,20,90]}]},msgDataIsNew:[],instIds:""}},computed:h({i18n:function(){return this.$t("extendManageList")}},(0,o.mapGetters)(["TRENDKANBAN","GET_ALITTLE"])),watch:{GET_ALITTLE:{handler:function(t,e){console.log(t.Putinname),this.instIds=t.Putinname,""!==t.Putinname&&(this.Chart(this.Starttiming,this.Closingtime,this.trendKanBanText.trendLeft,this.trendKanBanText.trendRight,this.instIds),this.Trenddata(this.dataTrendKanban.starTime,this.dataTrendKanban.endTime,this.instIds))},deep:!0}},created:function(){this.dataTrendKanban.starTime=this.getDate(7),this.dataTrendKanban.endTime=this.getDate(0),this.getDate(1),this.Starttiming=this.getDate(7),this.Closingtime=this.getDate(0),this.Trenddata(this.Starttiming,this.Closingtime,this.instIds),this.Chart(this.Starttiming,this.Closingtime,this.trendKanBanText.trendLeft,this.trendKanBanText.trendRight,this.instIds),this.itemList2=this.i18n.itemList2,i=this,this.cWidth=t.upx2px(750),this.cHeight=t.upx2px(500),this.getServerData()},mounted:function(){},methods:h({},(0,o.mapMutations)({setTrendKan:"setTrendKan",setLoadingShow:"setLoadingShow",setLoadingText:"setLoadingText",setCustomTime:"setCustomTime"}),{stomTime:function(t){console.log(t[0],t[1]),this.Starttiming=t[0],this.Closingtime=t[1],this.Trenddata(this.Starttiming,this.Closingtime,this.instIds),this.Chart(this.Starttiming,this.Closingtime,this.trendKanBanText.trendLeft,this.trendKanBanText.trendRight,this.instIds)},clikeTimeTab:function(t){console.log(t,"切换时间tab"),1===t?(this.clickItemsIndex=t,this.Trenddata(this.getDate(1),this.getDate(1),this.instIds),this.Starttiming=this.getDate(1),this.Closingtime=this.getDate(1),this.Chart(this.Starttiming,this.Closingtime,this.trendKanBanText.trendLeft,this.trendKanBanText.trendRight,this.instIds)):7==t?(this.clickItemsIndex=t,this.Trenddata(this.getDate(t),this.getDate(0),this.instIds),this.Starttiming=this.getDate(t),this.Closingtime=this.getDate(0),this.Chart(this.Starttiming,this.Closingtime,this.trendKanBanText.trendLeft,this.trendKanBanText.trendRight,this.instIds)):30==t?(this.clickItemsIndex=t,this.Trenddata(this.getDate(t),this.getDate(0),this.instIds),this.Starttiming=this.getDate(t),this.Closingtime=this.getDate(0),this.Chart(this.Starttiming,this.Closingtime,this.trendKanBanText.trendLeft,this.trendKanBanText.trendRight,this.instIds)):"001"===t&&(console.log("触发自定义时间"),this.clickItemsIndex=t,this.customTime2.show=!0,this.$store.commit("setCustomTime2",this.customTime2))},Trenddata:function(e,n){var i=this;if(console.log(e,n),t.getStorageSync("landRegist")){var a=JSON.parse(t.getStorageSync("landRegist"));console.log(a.user.id);var s={starTime:e,endTime:n,userId:a.user.id};console.log(s),t.showLoading({title:"加载中"}),t.request({url:this.api2+"/rest-rp/putIn/dataInfo",data:s,method:"POST",header:{Authorization:"Bearer "+a.token},success:function(e){t.hideLoading(),console.log(e.data),i.timess=e.data,i.i18n.itemList2[0].code=i.timess.sumMoney,i.i18n.itemList2[1].code=i.timess.scaleMoney,i.i18n.itemList2[2].code=i.timess.countInfo,i.i18n.itemList2[3].code=i.timess.clikeCount,i.i18n.itemList2[4].code=i.timess.clikeCountRate,i.i18n.itemList2[5].code=i.timess.converCount,i.i18n.itemList2[6].code=i.timess.converCountRate,i.i18n.itemList2[7].code=i.timess.submitCount,i.i18n.itemList2[8].code=i.timess.telCount,i.i18n.itemList2[9].code=i.timess.followCount,i.i18n.itemList2[10].code=i.timess.chatCount,i.i18n.itemList2[11].code=i.timess.inquCount,i.i18n.itemList2[12].code=i.timess.orderCount},fail:function(e){t.hideLoading(),t.showToast({title:"网络繁忙，请稍后",icon:"none",duration:1e3}),console.log(e,"网络繁忙，请稍后")}})}},Chart:function(e,n,i,a,s){var r=this;if(t.getStorageSync("landRegist")){var o=JSON.parse(t.getStorageSync("landRegist"));if(console.log(o.user.id),void 0==i&&void 0==a){var d={starTime:e,endTime:n,userId:o.user.id,lineType0:0,lineType1:1,instIds:s};console.log(3)}else if(void 0==i){d={starTime:e,endTime:n,userId:o.user.id,lineType0:0,lineType1:a,instIds:s};console.log(1)}else if(void 0==a){d={starTime:e,endTime:n,userId:o.user.id,lineType0:i,lineType1:1,instIds:s};console.log(2)}else if(-1==i)d={starTime:e,endTime:n,userId:o.user.id,lineType0:0,lineType1:a,instIds:s};else if(0==s.length)d={starTime:e,endTime:n,userId:o.user.id,lineType0:i,lineType1:a,instIds:""};else{d={starTime:e,endTime:n,userId:o.user.id,lineType0:i,lineType1:a,instIds:s};console.log(4)}console.log(d),t.showLoading({title:"加载中"}),t.request({url:this.api2+"/rest-rp/putIn/dataInfoLineList",data:d,method:"POST",header:{Authorization:"Bearer "+o.token},success:function(e){t.hideLoading(),console.log(e.data);var n=e.data.content.values0,i=e.data.content.values1;r.LineA.series[0].data=n,r.LineA.series[1].data=i,r.LineA.categories=e.data.content.dates,r.getServerData()},fail:function(e){t.hideLoading(),t.showToast({title:"网络繁忙，请稍后",icon:"none",duration:1e3}),console.log(e,"网络繁忙，请稍后")}})}},timeChange:function(t){var e=this;console.log("picker发送选择改变，携带值为",t.target.value),this.i18n.screenData.map(function(n,i){String(i)===String(t.target.value)&&(console.log(n,"时间选择"),"001"!==n.code?(e.isCustomTime=!1,e.trendKanBanText.kanBanText=n.text,e.dataTrendKanban.starTime=e.getDate(n.code),e.dataTrendKanban.endTime=e.getDate(0)):(console.log("触发自定义时间"),e.isCustomTime=!0))})},leftScreenDataChange:function(t){var e=this;console.log("picker发送选择改变，携带值为",t.target.value),this.i18n.Generaldatachart.map(function(n,i){String(i)===String(t.target.value)&&(console.log(n,"左侧选择数据"),e.trendKanBanText.trendLeftText=n.text,e.trendKanBanText.trendLeft=n.code,e.LineA.series[0].name=n.text,console.log(e.LineA,"跟新后数据"),e.updateUcharts(e.LineA),"总消耗"==n.text?e.Chart(e.Starttiming,e.Closingtime,e.trendKanBanText.trendLeft,e.trendKanBanText.trendRight,e.instIds):"展示数"==n.text?e.Chart(e.Starttiming,e.Closingtime,e.trendKanBanText.trendLeft,e.trendKanBanText.trendRight,e.instIds):"点击数"==n.text?e.Chart(e.Starttiming,e.Closingtime,e.trendKanBanText.trendLeft,e.trendKanBanText.trendRight,e.instIds):"点击率"==n.text?e.Chart(e.Starttiming,e.Closingtime,e.trendKanBanText.trendLeft,e.trendKanBanText.trendRight,e.instIds):"转化数"==n.text?e.Chart(e.Starttiming,e.Closingtime,e.trendKanBanText.trendLeft,e.trendKanBanText.trendRight,e.instIds):"转化率"==n.text?e.Chart(e.Starttiming,e.Closingtime,e.trendKanBanText.trendLeft,e.trendKanBanText.trendRight,e.instIds):"提交表单数"==n.text?e.Chart(e.Starttiming,e.Closingtime,e.trendKanBanText.trendLeft,e.trendKanBanText.trendRight,e.instIds):"拨打电话数"==n.text?e.Chart(e.Starttiming,e.Closingtime,e.trendKanBanText.trendLeft,e.trendKanBanText.trendRight,e.instIds):"进入关注我们页面"==n.text?e.Chart(e.Starttiming,e.Closingtime,e.trendKanBanText.trendLeft,e.trendKanBanText.trendRight,e.instIds):"点击自定义oa按钮数"==n.text?e.Chart(e.Starttiming,e.Closingtime,e.trendKanBanText.trendLeft,e.trendKanBanText.trendRight,e.instIds):"询价数"==n.text?e.Chart(e.Starttiming,e.Closingtime,e.trendKanBanText.trendLeft,e.trendKanBanText.trendRight,e.instIds):"聊天数"==n.text?e.Chart(e.Starttiming,e.Closingtime,e.trendKanBanText.trendLeft,e.trendKanBanText.trendRight,e.instIds):"订单数"==n.text&&e.Chart(e.Starttiming,e.Closingtime,e.trendKanBanText.trendLeft,e.trendKanBanText.trendRight,e.instIds))})},rightScreenDataChange:function(t){var e=this;console.log("picker发送选择改变，携带值为",t.target.value),this.i18n.Generaldatachart.map(function(n,i){String(i)===String(t.target.value)&&(console.log(n,"右侧选择数据"),e.trendKanBanText.trendRightText=n.text,e.trendKanBanText.trendRight=n.code,e.LineA.series[1].name=n.text,e.updateUcharts(e.LineA),"总消耗"==n.text?e.Chart(e.Starttiming,e.Closingtime,e.trendKanBanText.trendLeft,e.trendKanBanText.trendRight,e.instIds):"展示数"==n.text?e.Chart(e.Starttiming,e.Closingtime,e.trendKanBanText.trendLeft,e.trendKanBanText.trendRight,e.instIds):"点击数"==n.text?e.Chart(e.Starttiming,e.Closingtime,e.trendKanBanText.trendLeft,e.trendKanBanText.trendRight,e.instIds):"点击率"==n.text?e.Chart(e.Starttiming,e.Closingtime,e.trendKanBanText.trendLeft,e.trendKanBanText.trendRight,e.instIds):"转化数"==n.text?e.Chart(e.Starttiming,e.Closingtime,e.trendKanBanText.trendLeft,e.trendKanBanText.trendRight,e.instIds):"转化率"==n.text?e.Chart(e.Starttiming,e.Closingtime,e.trendKanBanText.trendLeft,e.trendKanBanText.trendRight,e.instIds):"提交表单数"==n.text?e.Chart(e.Starttiming,e.Closingtime,e.trendKanBanText.trendLeft,e.trendKanBanText.trendRight,e.instIds):"拨打电话数"==n.text?e.Chart(e.Starttiming,e.Closingtime,e.trendKanBanText.trendLeft,e.trendKanBanText.trendRight,e.instIds):"进入关注我们页面"==n.text?e.Chart(e.Starttiming,e.Closingtime,e.trendKanBanText.trendLeft,e.trendKanBanText.trendRight,e.instIds):"点击自定义oa按钮数"==n.text?e.Chart(e.Starttiming,e.Closingtime,e.trendKanBanText.trendLeft,e.trendKanBanText.trendRight,e.instIds):"询价数"==n.text?e.Chart(e.Starttiming,e.Closingtime,e.trendKanBanText.trendLeft,e.trendKanBanText.trendRight,e.instIds):"聊天数"==n.text?e.Chart(e.Starttiming,e.Closingtime,e.trendKanBanText.trendLeft,e.trendKanBanText.trendRight,e.instIds):"订单数"==n.text&&e.Chart(e.Starttiming,e.Closingtime,e.trendKanBanText.trendLeft,e.trendKanBanText.trendRight,e.instIds))})},getServerData:function(){var t={categories:[],series:[]};t.categories=this.LineA.categories,t.series=this.LineA.series,i.textarea=JSON.stringify(this.LineA),i.showLineA("canvasLineA",t)},showLineA:function(t,e){g=new a.default({$this:i,canvasId:t,type:"line",colors:["#02C2A2","#FF4D6A"],fontSize:11,padding:[15,15,0,15],legend:{position:"top",show:!0,padding:5,lineHeight:11,margin:5},dataLabel:!0,dataPointShape:!0,dataPointShapeType:"hollow",background:"#FFFFFF",pixelRatio:i.pixelRatio,categories:e.categories,series:e.series,animation:!1,enableScroll:!0,xAxis:{disableGrid:!0,type:"grid",gridColor:"#02C2A2",fontSize:12,gridType:"solid",itemCount:4,scrollShow:!1,scrollAlign:"left"},yAxis:{disabled:!0,disableGrid:!0},width:i.cWidth*i.pixelRatio,height:i.cHeight*i.pixelRatio,extra:{line:{type:"curve"}}})},touchLineA:function(t){g.scrollStart(t)},moveLineA:function(t){g.scroll(t)},touchEndLineA:function(t){g.scrollEnd(t),g.touchLegend(t),g.showToolTip(t,{format:function(t,e){return e+" "+t.name+":"+t.data}})},changeData:function(){if((0,s.isJSON)(i.textarea)){var e=JSON.parse(i.textarea);g.updateData({series:e.series,categories:e.categories,scrollPosition:"right",animation:!1})}else t.showToast({title:"数据格式错误"})},updateUcharts:function(t){var e=t;console.log(e,"需要跟新的新数据uchart"),g.updateData({series:e.series,categories:e.categories})},resetKanBanData:function(t){console.log("重置看板数据"),this.itemList[0].num=t.sumMoney,this.itemList[1].num=t.clikeCount,this.itemList[2].num=t.clikeCountRate,this.itemList[3].num=t.countInfo,this.itemList[4].num=t.converCount,this.itemList[5].num=t.converCountRate,this.itemList[6].num=t.submitCount,this.itemList[7].num=t.telCount,this.itemList[8].num=t.followCount,this.itemList[9].num=t.clikeCustCount,this.itemList[10].num=t.scaleMoney},getLine:function(t){console.log(t,"折线数据"),this.line.series[0].data={},this.line.series[1].data={},this.line.xAxis.data=t.dates,this.line.series[0].data=t.values1,this.line.series[1].data=t.values0},screenDataPopup:function(t){0===t?this.dataPopup=!0:1===t?this.leftScreenPopup=!0:2===t&&(this.rightScreenPopup=!0)},confirmScreen:function(){console.log("1"),"001"!==this.trendKanban.kanBanTime?(this.isCustomTime=!1,this.dataPopup=!1,this.trendKanBanText=this.trendKanban,this.$store.commit("setTrendKan",this.trendKanban),this.dataTrendKanban.starTime=this.getDate(this.trendKanban.kanBanTime),this.dataTrendKanban.endTime=this.getDate(0),this.getDataTrendKanBan()):(console.log("触发自定义时间"),this.isCustomTime=!0,this.dataPopup=!1,Toast({message:"请输入起始时间",duration:2e3}),this.$refs.birthPicker.open())},confirmBth:function(){this.dataTime.starTime||(this.dataTime.starTime="2018-01-01");var t=new Date(this.GMTToStr(this.dataTime.starTime).replace(/-/g,"/")),e=new Date(this.getDate(0).replace(/-/g,"/"));if(t>=e)return Toast("起始时间应小于今天"),void this.$refs.birthPicker.open();this.dataTrendKanban.starTime=this.GMTToStr(this.dataTime.starTime),Toast({message:"请输入结束时间",duration:2e3}),this.$refs.birthPicker2.open()},confirmBth2:function(){this.dataTime.endTime||(this.dataTime.endTime="2018-01-01");var t=new Date(this.dataTrendKanban.starTime.replace(/-/g,"/")),e=new Date(this.GMTToStr(this.dataTime.endTime).replace(/-/g,"/"));if(e<=t)return Toast("结束时间应大于起始时间"),void this.$refs.birthPicker2.open();this.dataTrendKanban.endTime=this.GMTToStr(this.dataTime.endTime),this.getDataTrendKanBan()},GMTToStr:function(t){var e=new Date(t),n=e.getMonth()+1;1===n.toString().length&&(n="0"+n);var i=e.getDate();1===i.toString().length&&(i="0"+i);var a=e.getFullYear()+"-"+n+"-"+i;return a},confirmLeftScreen:function(){console.log("2"),this.leftScreenPopup=!1,this.trendKanBanText=this.trendKanban,this.$store.commit("setTrendKan",this.trendKanban),this.dataTrend.lineType0=this.trendKanban.trendLeft,this.line.legend.data[0]=this.trendKanban.trendLeftText,this.line.series[1].name=this.trendKanban.trendLeftText,this.getDataTrendKanBan()},confirmRightScreen:function(){console.log("3"),this.rightScreenPopup=!1,this.trendKanBanText=this.trendKanban,this.$store.commit("setTrendKan",this.trendKanban),this.dataTrend.lineType1=this.trendKanban.trendRight,console.log(this.line.legend.data,this.line.series,"展示数据横线text"),this.line.legend.data[1]=this.trendKanban.trendRightText,this.line.series[0].name=this.trendKanban.trendRightText,this.getDataTrendKanBan()},getDataTrendKanBan:function(){var t=this;console.log("获取推广项目看板数据"),this.$store.commit("setLoadingShow",!0);var e=this.dataTrendKanban;axios.post(this.api2+"/rest-rp/putIn/dataInfo",e).then(function(e){console.log(e.data,"看板数据");var n=e.data;t.resetKanBanData(n),console.log("数据看板数据"),t.getTrendData()}).catch(function(e){t.$store.commit("setLoadingShow",!1),Toast("网络繁忙，请稍后"),console.log(e,"网络繁忙，请稍后")})},getTrendData:function(){var t=this;console.log("获取数据趋势数据");var e=JSON.parse(localStorage.getItem("landRegist"));console.log(e.user.id);var n=this.dataTrendKanban;n.lineType0=this.dataTrend.lineType0,n.lineType1=this.dataTrend.lineType1,axios.post(this.api2+"/rest-rp/putIn/dataInfoLineList",n).then(function(e){t.$store.commit("setLoadingShow",!1),console.log("数据趋势数据");var n=e.data.content;t.getLine(n)}).catch(function(e){t.$store.commit("setLoadingShow",!1),Toast("网络繁忙，请稍后"),console.log(e,"网络繁忙，请稍后")})},onNationChange:function(t,e){console.log(e)},onValuesChangeKanBan:function(t,e){console.log(e),this.trendKanban.kanBanTime=e[0].code,this.trendKanban.kanBanText=e[0].text,console.log(this.trendKanban,"看板")},onValuesChangeTrendLeft:function(t,e){console.log(e),this.trendKanban.trendLeft=e[0].code,this.trendKanban.trendLeftText=e[0].text,console.log(this.trendKanban,"趋势left")},onValuesChangeTrendRight:function(t,e){console.log(e),this.trendKanban.trendRight=e[0].code,this.trendKanban.trendRightText=e[0].text,console.log(this.trendKanban,"趋势right")},InitTabScroll:function(){var t=this;this.$nextTick(function(){t.scroll?t.scroll.refresh():t.scroll=new BScroll(t.$refs.tab,{startX:0,click:!0,scrollX:!0,scrollY:!1,eventPassthrough:"vertical"})})}})};e.default=m}).call(this,n("543d")["default"])},5384:function(t,e,n){"use strict";n.r(e);var i=n("3b2e"),a=n.n(i);for(var s in i)"default"!==s&&function(t){n.d(e,t,function(){return i[t]})}(s);e["default"]=a.a},"72c2":function(t,e,n){"use strict";var i=function(){var t=this,e=t.$createElement;t._self._c},a=[];n.d(e,"a",function(){return i}),n.d(e,"b",function(){return a})},"7e7b":function(t,e,n){}}]);
;(global["webpackJsonp"] = global["webpackJsonp"] || []).push([
    'modules/aLittle/dataReport/dataTrendKanban/putIn/dataTrend-create-component',
    {
        'modules/aLittle/dataReport/dataTrendKanban/putIn/dataTrend-create-component':(function(module, exports, __webpack_require__){
            __webpack_require__('543d')['createComponent'](__webpack_require__("2917"))
        })
    },
    [['modules/aLittle/dataReport/dataTrendKanban/putIn/dataTrend-create-component']]
]);
