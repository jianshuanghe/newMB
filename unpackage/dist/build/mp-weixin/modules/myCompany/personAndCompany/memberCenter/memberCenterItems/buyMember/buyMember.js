(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["modules/myCompany/personAndCompany/memberCenter/memberCenterItems/buyMember/buyMember"],{"7a7d":function(e,t,o){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=function(){return o.e("components/mbbo/topBox/topBox").then(o.bind(null,"27bc"))},i={name:"buyMember",components:{topBox:n},data:function(){return{UserData:null,imgList:null,weixin:this.Static+"images/business/home/personCenter/WXPay.png",zhifubao:this.Static+"images/business/home/personCenter/ALIPay.png",select:this.Static+"images/business/home/personCenter/勾选-未选择.png",selected:this.Static+"images/business/home/personCenter/勾选-选中.png",lose:this.Static+"images/business/home/personCenter/订单提交失败.png",userLogo:this.Static+"my/sasf.png",ZhiFuBao:!0,WeiXin:!1,browserType:"FWX",PayMethod:1,applyVipNum:"",isShowPopup:!1,paramsWx:""}},mounted:function(){},computed:{},watch:{},methods:{getUserData:function(){var t=this;if(console.log("获取用户信息，全部"),e.getStorageSync("landRegist")){var o=JSON.parse(e.getStorageSync("landRegist"));e.showLoading({title:"加载中"}),e.request({url:this.api2+"/rest-rp/vip/vipInfo?userId="+o.user.id,method:"GET",header:{Authorization:"Bearer "+o.token},success:function(o){e.hideLoading(),console.log(o.data,"会员支付页"),t.UserData=o.data.content;var n=o.data.content.headImg;console.log(n,"logoImglist"),t.imgList=n.slice(-5),console.log(imgList,"imgList")},fail:function(t){e.hideLoading(),e.showToast({title:"网络繁忙，请稍后",icon:"none",duration:1e3}),console.log(t,"网络繁忙，请稍后")}})}},checkType:function(e){1===e?(console.log("支付宝"),this.ZhiFuBao=!this.ZhiFuBao,!0===this.WeiXin&&(this.WeiXin=!1)):2===e&&(console.log("微信"),this.WeiXin=!this.WeiXin,!0===this.ZhiFuBao&&(this.ZhiFuBao=!1)),this.PayMethod===e?this.PayMethod="":this.PayMethod=e,console.log(this.PayMethod,"----支付方式-----")},zhiFuBaoPay:function(e){console.log("支付宝支付"),console.log(e),location.href=this.api2+"/rest-rp/vip/createZfbPayOrder?applyVipNum="+e},clickImmedPay:function(){if(console.log("触发立即支付按钮"),console.log(this.UserData,"this.UserData"),""!==this.PayMethod)if(this.UserData.applyNum){console.log("走继续支付流程");var e=this.UserData.applyNum;1===this.PayMethod?this.zhiFuBaoPay(e):this.WXpay(this.paramsWx)}else console.log("走支付流程"),this.createOrder();else console.log("请选择支付方式！")},outTradeNo:function(){var t=this;if(console.log(this.$route.query.out_trade_no,"支付宝支付成功后传送过来的订单号"),this.$route.query.out_trade_no&&e.getStorageSync("landRegist")){var o=JSON.parse(e.getStorageSync("landRegist"));e.showLoading({title:"加载中"}),e.request({url:this.api2+"/rest-rp/vip/selectPayNumByState?out_trade_no="+this.$route.query.out_trade_no,method:"GET",header:{Authorization:"Bearer "+o.token},success:function(o){e.hideLoading(),console.log(o,"支付宝支付成功后传送过来的订单号"),"1"==o.data.content?(console.log("支付成功"),e.redirectTo({url:"../../memberCenter"})):"0"==o.data.content&&(console.log("未支付成功"),t.isShowPopup=!0)},fail:function(t){e.hideLoading(),e.showToast({title:"网络繁忙，请稍后",icon:"none",duration:1e3}),console.log(t,"网络繁忙，请稍后")}})}},WXreturnNum:function(){var t=this;if(console.log(this.$route.query.applyVipNum,"微信传送过来的订单号"),this.$route.query.applyVipNum&&(this.applyVipNum=this.$route.query.applyVipNum,console.log(this.applyVipNum,"微信传送过来的订单号保存早data"),e.getStorageSync("landRegist"))){var o=JSON.parse(e.getStorageSync("landRegist"));e.showLoading({title:"加载中"}),e.request({url:this.api2+"/rest-rp/vip/createWxPayOrderDo?applyVipNum="+this.applyVipNum,method:"GET",header:{Authorization:"Bearer "+o.token},success:function(o){e.hideLoading(),console.log(o,"微信成功后传送过来的订单号"),t.paramsWx=o.data.content},fail:function(t){e.hideLoading(),e.showToast({title:"网络繁忙，请稍后",icon:"none",duration:1e3}),console.log(t,"网络繁忙，请稍后")}})}},WXpay:function(t){var n=o("f009");console.log(t,"拉起微信支付");var i=t;n.config({debug:!1,appId:i.appId,timestamp:i.timeStamp,nonceStr:i.nonceStr,signature:i.signJs,jsApiList:["chooseWXPay"]}),n.chooseWXPay({timestamp:i.timeStamp,nonceStr:i.nonceStr,package:i.packageValue,signType:"MD5",paySign:i.paySign,success:function(t){"chooseWXPay:ok"===t.errMsg?(console.log("支付成功"),setTimeout(function(){e.redirectTo({url:"../../memberCenter"})},500)):(console.log("未支付成功"),this.isShowPopup=!0)},cancel:function(e){}})},ContinuPayment:function(){this.isShowPopup=!1},PhoneCall:function(){e.makePhoneCall({phoneNumber:"4006182288"})}},created:function(){if(this.getUserData(),this.outTradeNo(),this.WXreturnNum(),e.getStorageSync("browserType")){var t=e.getStorageSync("browserType");console.log(t),"WX"===t?(this.browserType="WX",this.PayMethod=2,this.WeiXin=!0):"FWX"===t&&(this.browserType="FWX",this.PayMethod=1)}}};t.default=i}).call(this,o("543d")["default"])},"7ac1":function(e,t,o){"use strict";o.r(t);var n=o("7a7d"),i=o.n(n);for(var a in n)"default"!==a&&function(e){o.d(t,e,function(){return n[e]})}(a);t["default"]=i.a},"934c":function(e,t,o){"use strict";var n=function(){var e=this,t=e.$createElement;e._self._c},i=[];o.d(t,"a",function(){return n}),o.d(t,"b",function(){return i})},"95fa":function(e,t,o){"use strict";var n=o("b561"),i=o.n(n);i.a},b561:function(e,t,o){},b76f:function(e,t,o){"use strict";o.r(t);var n=o("934c"),i=o("7ac1");for(var a in i)"default"!==a&&function(e){o.d(t,e,function(){return i[e]})}(a);o("95fa");var s=o("2877"),r=Object(s["a"])(i["default"],n["a"],n["b"],!1,null,"24162404",null);t["default"]=r.exports}},[["9e90","common/runtime","common/vendor"]]]);