(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["modules/myCompany/personAndCompany/memberCenter/memberCenterItems/buyMember/buyMember"],{"3a91":function(e,t,o){"use strict";var n=o("c858"),a=o.n(n);a.a},5090:function(e,t,o){"use strict";var n=function(){var e=this,t=e.$createElement;e._self._c},a=[];o.d(t,"a",function(){return n}),o.d(t,"b",function(){return a})},"970e":function(e,t,o){"use strict";o.r(t);var n=o("9de6"),a=o.n(n);for(var i in n)"default"!==i&&function(e){o.d(t,e,function(){return n[e]})}(i);t["default"]=a.a},"9de6":function(e,t,o){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=u(o("5a63")),a=u(o("fbf4")),i=u(o("cad0")),s=u(o("ca6d")),r=u(o("8209"));function u(e){return e&&e.__esModule?e:{default:e}}var c=function(){return o.e("components/mbbo/topBox/topBox").then(o.bind(null,"5af2"))},l={name:"buyMember",components:{topBox:c},data:function(){return{UserData:null,weixin:n.default,zhifubao:a.default,select:i.default,selected:s.default,lose:r.default,ZhiFuBao:!0,WeiXin:!1,browserType:"FWX",PayMethod:1,applyVipNum:"",isShowPopup:!1,paramsWx:""}},mounted:function(){},computed:{},watch:{},methods:{getUserData:function(){var t=this;if(console.log("获取用户信息，全部"),e.getStorageSync("landRegist")){var o=JSON.parse(e.getStorageSync("landRegist"));e.showLoading({title:"加载中"}),e.request({url:this.api2+"/rest-rp/vip/vipInfo?userId="+o.user.id,method:"GET",header:{Authorization:"Bearer "+o.token},success:function(o){e.hideLoading(),console.log(o.data,"会员支付页"),t.UserData=o.data.content},fail:function(t){e.hideLoading(),e.showToast({title:"网络繁忙，请稍后",icon:"none",duration:1e3}),console.log(t,"网络繁忙，请稍后")}})}},checkType:function(e){1===e?(console.log("支付宝"),this.ZhiFuBao=!this.ZhiFuBao,!0===this.WeiXin&&(this.WeiXin=!1)):2===e&&(console.log("微信"),this.WeiXin=!this.WeiXin,!0===this.ZhiFuBao&&(this.ZhiFuBao=!1)),this.PayMethod===e?this.PayMethod="":this.PayMethod=e,console.log(this.PayMethod,"----支付方式-----")},zhiFuBaoPay:function(e){console.log("支付宝支付"),console.log(e),location.href=this.api2+"/rest-rp/vip/createZfbPayOrder?applyVipNum="+e},clickImmedPay:function(){if(console.log("触发立即支付按钮"),console.log(this.UserData,"this.UserData"),""!==this.PayMethod)if(this.UserData.applyNum){console.log("走继续支付流程");var e=this.UserData.applyNum;1===this.PayMethod?this.zhiFuBaoPay(e):(console.log(e,"走微信支付流程"),this.WXpay(this.paramsWx))}else console.log("走支付流程"),this.createOrder();else console.log("请选择支付方式！")},outTradeNo:function(){var t=this;if(console.log(this.$route.query.out_trade_no,"支付宝支付成功后传送过来的订单号"),this.$route.query.out_trade_no&&e.getStorageSync("landRegist")){var o=JSON.parse(e.getStorageSync("landRegist"));e.showLoading({title:"加载中"}),e.request({url:this.api2+"/rest-rp/vip/selectPayNumByState?out_trade_no="+this.$route.query.out_trade_no,method:"GET",header:{Authorization:"Bearer "+o.token},success:function(o){e.hideLoading(),console.log(o,"支付宝支付成功后传送过来的订单号"),"1"==o.data.content?(console.log("支付成功"),e.redirectTo({url:"../../memberCenter"})):"0"==o.data.content&&(console.log("未支付成功"),t.isShowPopup=!0)},fail:function(t){e.hideLoading(),e.showToast({title:"网络繁忙，请稍后",icon:"none",duration:1e3}),console.log(t,"网络繁忙，请稍后")}})}},WXreturnNum:function(){var t=this;if(console.log(this.$route.query.applyVipNum,"微信传送过来的订单号"),this.$route.query.applyVipNum&&(this.applyVipNum=this.$route.query.applyVipNum),e.getStorageSync("landRegist")){var o=JSON.parse(e.getStorageSync("landRegist"));e.showLoading({title:"加载中"}),e.request({url:this.api2+"/rest-rp/vip/createWxPayOrderDo?applyVipNum="+this.applyVipNum,method:"GET",header:{Authorization:"Bearer "+o.token},success:function(o){e.hideLoading(),console.log(o,"微信成功后传送过来的订单号"),t.paramsWx=o.data.content},fail:function(t){e.hideLoading(),e.showToast({title:"网络繁忙，请稍后",icon:"none",duration:1e3}),console.log(t,"网络繁忙，请稍后")}})}},WXpay:function(t){console.log(t,"拉起微信支付");var o=t;wx.config({debug:!1,appId:o.appId,timestamp:o.timeStamp,nonceStr:o.nonceStr,signature:o.signJs,jsApiList:["chooseWXPay"]}),wx.chooseWXPay({timestamp:o.timeStamp,nonceStr:o.nonceStr,package:o.packageValue,signType:"MD5",paySign:o.paySign,success:function(t){"chooseWXPay:ok"===t.errMsg?(console.log("支付成功"),setTimeout(function(){e.redirectTo({url:"../../memberCenter"})},500)):(console.log("未支付成功"),this.isShowPopup=!0)},cancel:function(e){alert("取消支付")}})},ContinuPayment:function(){this.isShowPopup=!1}},created:function(){if(this.getUserData(),this.outTradeNo(),this.WXreturnNum(),e.getStorageSync("browserType")){var t=e.getStorageSync("browserType");console.log(t),"WX"===t?(this.browserType="WX",this.PayMethod=2,this.WeiXin=!0):"FWX"===t&&(this.browserType="FWX",this.PayMethod=1)}}};t.default=l}).call(this,o("543d")["default"])},c858:function(e,t,o){},c970:function(e,t,o){"use strict";(function(e){o("7ae1"),o("921b");n(o("66fd"));var t=n(o("d8aa"));function n(e){return e&&e.__esModule?e:{default:e}}e(t.default)}).call(this,o("543d")["createPage"])},d8aa:function(e,t,o){"use strict";o.r(t);var n=o("5090"),a=o("970e");for(var i in a)"default"!==i&&function(e){o.d(t,e,function(){return a[e]})}(i);o("3a91");var s=o("2877"),r=Object(s["a"])(a["default"],n["a"],n["b"],!1,null,"3a79aa46",null);t["default"]=r.exports}},[["c970","common/runtime","common/vendor"]]]);