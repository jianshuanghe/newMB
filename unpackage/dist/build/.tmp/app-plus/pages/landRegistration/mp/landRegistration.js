(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/landRegistration/mp/landRegistration"],{"6b2a":function(t,a,e){},"7a78":function(t,a,e){"use strict";e.r(a);var n=e("fada"),o=e.n(n);for(var i in n)"default"!==i&&function(t){e.d(a,t,function(){return n[t]})}(i);a["default"]=o.a},acfbf:function(t,a,e){"use strict";var n=e("6b2a"),o=e.n(n);o.a},df3b:function(t,a,e){"use strict";e.r(a);var n=e("f6d1"),o=e("7a78");for(var i in o)"default"!==i&&function(t){e.d(a,t,function(){return o[t]})}(i);e("acfbf");var s=e("2877"),r=Object(s["a"])(o["default"],n["a"],n["b"],!1,null,"58eaf187",null);a["default"]=r.exports},f6d1:function(t,a,e){"use strict";var n=function(){var t=this,a=t.$createElement;t._self._c},o=[];e.d(a,"a",function(){return n}),e.d(a,"b",function(){return o})},fab9:function(t,a,e){"use strict";(function(t){e("ad90"),e("921b");n(e("66fd"));var a=n(e("df3b"));function n(t){return t&&t.__esModule?t:{default:t}}t(a.default)}).call(this,e("6e42")["createPage"])},fada:function(t,a,e){"use strict";(function(t,e){Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var n={name:"",components:{},data:function(){return{logo:this.Static+"landRegistration/logo.png",phoneIsGet:!0}},created:function(){},mounted:function(){console.log(t(this.api2,"全局数据"," at pages\\landRegistration\\mp\\landRegistration.vue:45")),this.getSessionKey()},methods:{getSessionKey:function(){e.login({provider:"weixin",scopes:"auth_base",success:function(a){console.log(t(a,"微信返回的code mounted"," at pages\\landRegistration\\mp\\landRegistration.vue:56"))}})},bindGetUserInfo:function(a){console.log(t(a," at pages\\landRegistration\\mp\\landRegistration.vue:125"))},getPhoneNumber:function(a){if(console.log(t(a," at pages\\landRegistration\\mp\\landRegistration.vue:128")),"getPhoneNumber:fail user deny"==a.detail.errMsg)console.log(t("用户拒绝提供手机号"," at pages\\landRegistration\\mp\\landRegistration.vue:130"));else{console.log(t("用户同意提供手机号"," at pages\\landRegistration\\mp\\landRegistration.vue:132")),console.log(t(a," at pages\\landRegistration\\mp\\landRegistration.vue:133"));var e=JSON.stringify(a.detail.encryptedData),n=JSON.stringify(a.detail.iv);console.log(t(e,n,"带你花------------11"," at pages\\landRegistration\\mp\\landRegistration.vue:136")),this.clickMpLand(e,n)}},clickMpLand:function(a,n){e.showLoading({title:"登陆中···"});console.log(t("触发小程序登录"," at pages\\landRegistration\\mp\\landRegistration.vue:146"))},mpBDLand:function(a,n){console.log(t("百度小程序登录"," at pages\\landRegistration\\mp\\landRegistration.vue:182")),e.showLoading({title:"登陆中···"});var o=this;e.getUserInfo({success:function(n){console.log(t(n,"拉取到的用户信息"," at pages\\landRegistration\\mp\\landRegistration.vue:189"));var i=e.getStorageSync("sessionKey");console.log(t(i," at pages\\landRegistration\\mp\\landRegistration.vue:191"));var s={openId:i.openid,baiduUserEncryptedData:n.data,sessionKey:i.session_key,baiduPhoneEncryptedData:JSON.parse(a)};console.log(t(s,"-------------------------------------------"," at pages\\landRegistration\\mp\\landRegistration.vue:198")),e.request({url:o.api2+"/rest-rp/mbUser/baiduMiniLogin",data:s,method:"POST",header:{},success:function(a){if(console.log(t(a.data," at pages\\landRegistration\\mp\\landRegistration.vue:205")),"200"===String(a.data.ret)){var n={randomKey:a.data.content.randomKey,token:a.data.content.token,user:{id:a.data.content.userId}};e.setStorageSync("landRegist",JSON.stringify(n)),o.getUserData()}else"400"===String(a.data.ret)?(e.hideLoading(),o.phoneIsGet=!1,e.showToast({title:"请同意获取手机号注册，再登录！",icon:"none",duration:500})):"500"===String(a.data.ret)?(e.hideLoading(),console.log(t(a.data,"---------------------response.data---------------------"," at pages\\landRegistration\\mp\\landRegistration.vue:226")),console.log(t("------------------------5000-----------------------"," at pages\\landRegistration\\mp\\landRegistration.vue:227")),e.showToast({title:"网络开小差了，请再次点击登录！",icon:"none",duration:500})):(e.hideLoading(),e.showToast({title:a.data.msg,icon:"none",duration:500}))},fail:function(a){e.hideLoading(),e.showToast({title:"网络繁忙，请稍后",icon:"none",duration:1e3}),console.log(t(a,"网络繁忙，请稍后"," at pages\\landRegistration\\mp\\landRegistration.vue:250"))}})}})},mpWxLand:function(a,n){console.log(t("微信小程序登录"," at pages\\landRegistration\\mp\\landRegistration.vue:257")),e.showLoading({title:"登陆中···"});var o=this;e.getUserInfo({provider:"weixin",success:function(i){console.log(t(i,"拉取到的用户信息"," at pages\\landRegistration\\mp\\landRegistration.vue:265"));var s=e.getStorageSync("sessionKey"),r={sessionKey:s,nickname:i.userInfo.nickName,compLogo:i.userInfo.avatarUrl,signature:i.signature,rawData:i.rawData,phoneEncryptedData:JSON.parse(a),phoneIv:JSON.parse(n),userEncryptedData:i.encryptedData,userIv:i.iv};e.request({url:o.api2+"/rest-rp/mbUser/wxMiniLogin",data:r,method:"POST",header:{},success:function(a){if(console.log(t(a.data," at pages\\landRegistration\\mp\\landRegistration.vue:284")),"200"===String(a.data.ret)){var n={randomKey:a.data.content.randomKey,token:a.data.content.token,user:{id:a.data.content.userId}};e.setStorageSync("landRegist",JSON.stringify(n)),o.getUserData()}else"400"===String(a.data.ret)?(e.hideLoading(),o.phoneIsGet=!1,e.showToast({title:"请同意获取手机号注册，再登录！",icon:"none",duration:500})):"500"===String(a.data.ret)?(e.hideLoading(),console.log(t(a.data,"---------------------response.data---------------------"," at pages\\landRegistration\\mp\\landRegistration.vue:305")),console.log(t("------------------------5000-----------------------"," at pages\\landRegistration\\mp\\landRegistration.vue:306")),e.showToast({title:"网络开小差了，请再次点击登录！",icon:"none",duration:500})):(e.hideLoading(),e.showToast({title:a.data.msg,icon:"none",duration:500}))},fail:function(a){e.hideLoading(),e.showToast({title:"网络繁忙，请稍后",icon:"none",duration:1e3}),console.log(t(a,"网络繁忙，请稍后"," at pages\\landRegistration\\mp\\landRegistration.vue:329"))}})}})},mpTtLand:function(){console.log(t("头条小程序登录"," at pages\\landRegistration\\mp\\landRegistration.vue:336"))},mpBdLand:function(){console.log(t("百度小程序登录"," at pages\\landRegistration\\mp\\landRegistration.vue:339"))},mpApLand:function(){console.log(t("支付宝小程序登录"," at pages\\landRegistration\\mp\\landRegistration.vue:342"))},getUserData:function(){console.log(t("获取用户信息，全部"," at pages\\landRegistration\\mp\\landRegistration.vue:345"));var a=JSON.parse(e.getStorageSync("landRegist"));console.log(t(a.user.id," at pages\\landRegistration\\mp\\landRegistration.vue:347")),e.request({url:this.api2+"/rest-rp/user/"+a.user.id,data:{},header:{Authorization:"Bearer "+a.token},success:function(a){if(console.log(t(a.data," at pages\\landRegistration\\mp\\landRegistration.vue:355")),"200"===String(a.data.ret)){var n=a.data.content;e.setStorageSync("UserData",JSON.stringify(n)),e.showToast({title:"登陆成功",icon:"none",duration:500}),e.navigateBack({delta:1}),setTimeout(function(){e.reLaunch({url:"/pages/mbc/home"})},500)}else e.hideLoading(),e.showToast({title:a.data.msg,icon:"none",duration:500})},fail:function(a){e.hideLoading(),e.showToast({title:"网络繁忙，请稍后",icon:"none",duration:1e3}),console.log(t(a,"网络繁忙，请稍后"," at pages\\landRegistration\\mp\\landRegistration.vue:386"))}})}}};a.default=n}).call(this,e("0de9")["default"],e("6e42")["default"])}},[["fab9","common/runtime","common/vendor"]]]);