(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["modules/publishPurchase/publishPurchase"],{"04df":function(e,t,i){"use strict";i.r(t);var u=i("fa99"),s=i("260e");for(var a in s)"default"!==a&&function(e){i.d(t,e,function(){return s[e]})}(a);var o=i("2877"),r=Object(o["a"])(s["default"],u["a"],u["b"],!1,null,null,null);t["default"]=r.exports},1192:function(e,t,i){"use strict";(function(e,u){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=o(i("09c7")),a=i("2f62");function o(e){return e&&e.__esModule?e:{default:e}}function r(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{},u=Object.keys(i);"function"===typeof Object.getOwnPropertySymbols&&(u=u.concat(Object.getOwnPropertySymbols(i).filter(function(e){return Object.getOwnPropertyDescriptor(i,e).enumerable}))),u.forEach(function(t){c(e,t,i[t])})}return e}function c(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}var n=function(){return i.e("modules/publishPurchase/selectTemplate/contontEdit").then(i.bind(null,"e07b"))},l=function(){return i.e("modules/publishPurchase/selectTemplate/contontPreview").then(i.bind(null,"4b57"))},p=function(){return Promise.all([i.e("common/vendor"),i.e("components/mbbo/navigation/navigation")]).then(i.bind(null,"5a67"))},h={components:{navigation:p,contontEdit:n,contontPreview:l},data:function(){return{loadEnd:!1,routeParam:null,businessTemList:null,caiGouDetileData:null,listData:{serverUrl:"https://img01.iambuyer.com/imgup/upLoad/fileUpload",imageData:[]},caiGouList:{paraList:[],requList:[],imgList:[],userId:760,purcTitle:"",purcSpec:"",purcCount:1,purcUnit:"",purcPcode:"",purcCcode:"",purcCcodeStr:"",purcContent:"",purcDefault:"0",purcInvo:"1",purcFrei:"1",purcEndTime:"",purcReceTime:"0-0-0",purcState:"",purcType:"0"}}},onLoad:function(t){this.$store.commit("setPreviceCaiGou",!1),this.$store.commit("setImgList",this.listData),this.$store.commit("setCaiGouList",this.caiGouList),console.log(e("加载发布采购"," at modules\\publishPurchase\\publishPurchase.vue:85"));var i=this.urlCrypto(t.urlParams,1);console.log(e(i,"---------------加载发布采购参数-------------"," at modules\\publishPurchase\\publishPurchase.vue:87")),this.routeParam=i,0===i.sourceTemp?(console.log(e("来源模板！"," at modules\\publishPurchase\\publishPurchase.vue:90")),this.caiGouList=this.GET_PUBLISH.publishPurchase.caiGouList,this.caiGouList.purcEndTime=this.getDate(3,"later"),this.getCaiGouTemplate(),this.getBusinessList(),this.shareEachPage()):4===i.sourceTemp?this.getPurchaseList(i):2===i.sourceTemp&&this.getPurchaseList(i)},computed:r({},(0,a.mapGetters)(["GET_PUBLISH","QUICKNAVCO"])),watch:{GET_PUBLISH:{handler:function(e,t){this.caiGouList=e.publishPurchase.caiGouList},deep:!0}},created:function(){},mounted:function(){},beforeDestroy:function(){console.log(e("页面销毁之前缓存数据更新-----------setImgList、setCaiGouList"," at modules\\publishPurchase\\publishPurchase.vue:119")),2!==this.routeParam.sourceTemp&&3!==this.routeParam.sourceTemp||this.$store.commit("setPreviceCaiGou",!1)},methods:r({},(0,a.mapMutations)({setTempletType:"setTempletType",setCaiGouList:"setCaiGouList"}),{getBusinessList:function(t){var i=this,s={};u.showLoading({title:"加载中"});var a=null;if(u.getStorageSync("landRegist")){var o=JSON.parse(u.getStorageSync("landRegist"));a=o.user.id}t&&void 0!==t&&(a=t),u.request({url:this.api2+"/rest-rp/instruc/userInfo?userId="+a,data:s,method:"GET",header:{Authorization:"Bearer "},success:function(t){console.log(e(t.data,"---------------response.data--------------"," at modules\\publishPurchase\\publishPurchase.vue:160")),"200"===t.data.ret?(u.hideLoading(),i.businessTemList=t.data,i.loadEnd=!0):(u.hideLoading(),u.showToast({title:"网络开小差了，请稍后重试",icon:"none",duration:1e3}))},fail:function(t){u.hideLoading(),u.showToast({title:"网络繁忙，请稍后",icon:"none",duration:1e3}),console.log(e(t,"网络繁忙，请稍后"," at modules\\publishPurchase\\publishPurchase.vue:181"))}})},getPurchaseList:function(t){var i=this;console.log(e("获取采购信息数据！"," at modules\\publishPurchase\\publishPurchase.vue:186")),console.log(e(t,"链接上的参数"," at modules\\publishPurchase\\publishPurchase.vue:187")),this.$store.commit("setPreviceCaiGou",!0);var a={};u.showLoading({title:"加载中"}),u.request({url:this.api2+"/rest-rp/purc/selectInfo?id="+t.purcId+"&lookUserId="+t.lookUserId,data:a,method:"GET",header:{Authorization:"Bearer "},success:function(t){if(console.log(e(t.data,"---------------response.data--------------"," at modules\\publishPurchase\\publishPurchase.vue:202")),"200"===t.data.ret){i.caiGouDetileData=t.data.content,u.setNavigationBarTitle({title:i.caiGouDetileData.purcTitle});var a=t.data.content;i.caiGouList.purcType=a.purcType,i.caiGouList.paraList=a.paraList,i.caiGouList.requList=a.requList,"0"===i.caiGouList.purcType?(i.$store.commit("setTempletType",0),u.setStorageSync("purcType",0),i.caiGouList.purcDefault="0"):"1"===i.caiGouList.purcType&&(i.$store.commit("setTempletType",1),u.setStorageSync("purcType",1),i.caiGouList.purcDefault="1"),i.caiGouList.id=a.id,i.caiGouList.purcEndTime=s.default.dateTime("-",a.purcEndTime),i.caiGouList.day=a.day,i.caiGouList.hour=a.hour,i.caiGouList.minute=a.minute,i.caiGouList.purcCcodeStr=a.purcCcodeStr,i.caiGouList.purcTitle=a.purcTitle,i.caiGouList.purcContent=a.purcContent,0===a.purcReceTime?i.caiGouList.purcReceTime="":i.caiGouList.purcReceTime=s.default.dateTime("-",a.purcReceTime);var o={serverUrl:"https://img01.iambuyer.com/imgup/upLoad/fileUpload",imageData:[]};if(a.imgList.map(function(e,t){if(e){var i={imgUrl:e};o.imageData.push(i)}}),console.log(e(o,"附件数据"," at modules\\publishPurchase\\publishPurchase.vue:246")),i.$store.commit("setImgList",o),i.caiGouList.imgList=a.imgList,console.log(e(i.caiGouList,"------------this.caiGouList-------------"," at modules\\publishPurchase\\publishPurchase.vue:249")),i.$store.commit("setCaiGouList",i.caiGouList),i.loadEnd=!0,"1"!==i.routeParam.purcState)i.shareEachPage(null,null,null,null,null);else{var r="采购者:【".concat(i.caiGouDetileData.createMan,"】"),c={shareTitle:i.caiGouDetileData.purcTitle,shareIntro:r,shareImg:i.caiGouDetileData.imgList.length>0?i.caiGouDetileData.imgList[0]:"https://style.iambuyer.com/img/shareimg.png",shareLink:i.origin+"/#/modules/publishPurchase/publishPurchase?urlParams="+i.urlCrypto(i.routeParam,0)},n={userId:i.routeParam.lookUserId,id:i.routeParam.purcId,type:1},l=i.routeParam.isFlow;i.shareEachPage(c,1,n,l,i.routeParam)}var p=i;setTimeout(function(){p.pageStatus=!1,u.hideLoading()},150),i.getBusinessList(a.userId)}else u.hideLoading(),u.showToast({title:"网络开小差了，请稍后重试",icon:"none",duration:1e3})},fail:function(t){u.hideLoading(),u.showToast({title:"网络繁忙，请稍后",icon:"none",duration:1e3}),console.log(e(t,"网络繁忙，请稍后"," at modules\\publishPurchase\\publishPurchase.vue:293"))}})},clickBusinessPutIn:function(){this.$store.commit("setTempletType",0),console.log(e("触发商机投放组件按钮"," at modules\\publishPurchase\\publishPurchase.vue:299"))},getCaiGouTemplate:function(){var t=this;if(console.log(e("记载用户默认采购模板"," at modules\\publishPurchase\\publishPurchase.vue:302")),u.getStorageSync("landRegist")){var i=JSON.parse(u.getStorageSync("landRegist"));console.log(e(i.user.id," at modules\\publishPurchase\\publishPurchase.vue:305"));var s={};u.showLoading({title:"加载中"}),u.request({url:this.api2+"/rest-rp/purc/getDefault?userId="+i.user.id,data:s,method:"GET",header:{Authorization:"Bearer "+i.token},success:function(e){if("200"===e.data.ret){u.hideLoading();var i=e.data.content;t.caiGouList.purcType=i.purcType,t.caiGouList.paraList=i.paraList,t.caiGouList.requList=i.requList,"0"===t.caiGouList.purcType?t.$store.commit("setTempletType",0):"1"===t.caiGouList.purcType&&t.$store.commit("setTempletType",1),t.$store.commit("setCaiGouList",t.caiGouList),t.loadEnd=!0}else u.hideLoading(),u.showToast({title:"网络开小差了，请稍后重试",icon:"none",duration:1e3})},fail:function(t){u.hideLoading(),u.showToast({title:"网络繁忙，请稍后",icon:"none",duration:1e3}),console.log(e(t,"网络繁忙，请稍后"," at modules\\publishPurchase\\publishPurchase.vue:348"))}})}}})};t.default=h}).call(this,i("0de9")["default"],i("6e42")["default"])},"260e":function(e,t,i){"use strict";i.r(t);var u=i("1192"),s=i.n(u);for(var a in u)"default"!==a&&function(e){i.d(t,e,function(){return u[e]})}(a);t["default"]=s.a},f3de:function(e,t,i){"use strict";(function(e){i("ad90"),i("921b");u(i("66fd"));var t=u(i("04df"));function u(e){return e&&e.__esModule?e:{default:e}}e(t.default)}).call(this,i("6e42")["createPage"])},fa99:function(e,t,i){"use strict";var u=function(){var e=this,t=e.$createElement;e._self._c},s=[];i.d(t,"a",function(){return u}),i.d(t,"b",function(){return s})}},[["f3de","common/runtime","common/vendor"]]]);