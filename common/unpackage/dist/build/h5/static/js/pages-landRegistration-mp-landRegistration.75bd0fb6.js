(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-landRegistration-mp-landRegistration"],{"20a8":function(t,n,i){"use strict";i.r(n);var e=i("7d87"),a=i.n(e);for(var o in e)"default"!==o&&function(t){i.d(n,t,function(){return e[t]})}(o);n["default"]=a.a},"3b66":function(t,n,i){"use strict";i.r(n);var e=i("5995"),a=i("20a8");for(var o in a)"default"!==o&&function(t){i.d(n,t,function(){return a[t]})}(o);i("43aa");var s=i("2877"),r=Object(s["a"])(a["default"],e["a"],e["b"],!1,null,"42c2db21",null);n["default"]=r.exports},"43aa":function(t,n,i){"use strict";var e=i("4b9b"),a=i.n(e);a.a},"4b9b":function(t,n,i){var e=i("986e");"string"===typeof e&&(e=[[t.i,e,""]]),e.locals&&(t.exports=e.locals);var a=i("4f06").default;a("39e6b23b",e,!0,{sourceMap:!1,shadowMode:!1})},5995:function(t,n,i){"use strict";var e=function(){var t=this,n=t.$createElement,i=t._self._c||n;return i("v-uni-view",{staticClass:"landRegistration-content"},[i("v-uni-view",{staticClass:"landRegistration"},[i("v-uni-view",{staticClass:"phone-passWord-LR"},[i("v-uni-view",{staticClass:"passWord-LR"},[i("v-uni-view",{staticClass:"top-PWLR"},[i("v-uni-image",{attrs:{src:t.logo,alt:"",mode:"widthFix"}})],1),i("div",{staticClass:"nameLand"},[t._v("欢迎登录")])],1),i("v-uni-view",{staticClass:"landBtn"},[i("v-uni-view",{})],1)],1)],1)],1)},a=[];i.d(n,"a",function(){return e}),i.d(n,"b",function(){return a})},"7d87":function(t,n,i){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var e={name:"",components:{},data:function(){return{logo:this.Static+"landRegistration/logo.png",phoneIsGet:!0}},created:function(){uni.hideShareMenu()},mounted:function(){console.log(this.api2,"全局数据"),this.getSessionKey()},methods:{getSessionKey:function(){var t=this;uni.login({provider:"weixin",scopes:"auth_base",success:function(n){console.log(n,"微信返回的code mounted"),uni.request({url:t.api2+"/rest-rp/mbUser/wxMiniSessionKey?code="+n.code,data:{},header:{},success:function(t){if(console.log(t.data),"200"===String(t.data.ret)){var n=t.data.content;console.log(n,"sessionKey"),uni.setStorageSync("sessionKey",n)}else uni.hideLoading(),uni.showToast({title:t.data.msg,icon:"none",duration:500})},fail:function(t){uni.hideLoading(),uni.showToast({title:"网络繁忙，请稍后",icon:"none",duration:1e3}),console.log(t,"网络繁忙，请稍后")}})}})},bindGetUserInfo:function(t){console.log(t)},getPhoneNumber:function(t){if(console.log(t),"getPhoneNumber:fail user deny"==t.detail.errMsg)console.log("用户拒绝提供手机号");else{console.log("用户同意提供手机号");var n=JSON.stringify(t.detail.encryptedData),i=JSON.stringify(t.detail.iv);console.log(n,i,"带你花------------"),this.clickMpLand(n,i)}},clickMpLand:function(t,n){uni.showLoading({title:"登陆中···"});console.log("触发小程序登录")},mpWxLand:function(t,n){console.log("微信小程序登录"),uni.showLoading({title:"登陆中···"});var i=this;uni.getUserInfo({provider:"weixin",success:function(e){console.log(e,"拉取到的用户信息");var a=uni.getStorageSync("sessionKey"),o={sessionKey:a,nickname:e.userInfo.nickName,compLogo:e.userInfo.avatarUrl,signature:e.signature,rawData:e.rawData,phoneEncryptedData:JSON.parse(t),phoneIv:JSON.parse(n),userEncryptedData:e.encryptedData,userIv:e.iv};uni.request({url:i.api2+"/rest-rp/mbUser/wxMiniLogin",data:o,method:"POST",header:{},success:function(t){if(console.log(t.data),"200"===String(t.data.ret)){var n={randomKey:t.data.content.randomKey,token:t.data.content.token,user:{id:t.data.content.userId}};uni.setStorageSync("landRegist",JSON.stringify(n)),i.getUserData()}else"400"===String(t.data.ret)?(uni.hideLoading(),i.phoneIsGet=!1,uni.showToast({title:"请同意获取手机号注册，再登录！",icon:"none",duration:500})):"500"===String(t.data.ret)?(uni.hideLoading(),console.log(t.data,"---------------------response.data---------------------"),console.log("------------------------5000-----------------------"),uni.showToast({title:"网络开小差了，请再次点击登录！",icon:"none",duration:500})):(uni.hideLoading(),uni.showToast({title:t.data.msg,icon:"none",duration:500}))},fail:function(t){uni.hideLoading(),uni.showToast({title:"网络繁忙，请稍后",icon:"none",duration:1e3}),console.log(t,"网络繁忙，请稍后")}})}})},mpTtLand:function(){console.log("头条小程序登录")},mpBdLand:function(){console.log("百度小程序登录")},mpApLand:function(){console.log("支付宝小程序登录")},getUserData:function(){console.log("获取用户信息，全部");var t=JSON.parse(uni.getStorageSync("landRegist"));console.log(t.user.id),uni.request({url:this.api2+"/rest-rp/user/"+t.user.id,data:{},header:{Authorization:"Bearer "+t.token},success:function(t){if(console.log(t.data),"200"===String(t.data.ret)){var n=t.data.content;uni.setStorageSync("UserData",JSON.stringify(n)),uni.showToast({title:"登陆成功",icon:"none",duration:500}),uni.navigateBack({delta:1}),setTimeout(function(){uni.reLaunch({url:"/pages/mbc/home"})},500)}else uni.hideLoading(),uni.showToast({title:t.data.msg,icon:"none",duration:500})},fail:function(t){uni.hideLoading(),uni.showToast({title:"网络繁忙，请稍后",icon:"none",duration:1e3}),console.log(t,"网络繁忙，请稍后")}})}}};n.default=e},"986e":function(t,n,i){n=t.exports=i("2350")(!1),n.push([t.i,".landRegistration-content[data-v-42c2db21]{position:relative;width:%?750?%;height:100vh;background:#fff}.landRegistration[data-v-42c2db21]{position:relative;padding:%?18?% %?40?%;background:#fff}.phone-passWord-LR[data-v-42c2db21]{position:relative;width:100%;margin-top:12vw}.phonw-LR[data-v-42c2db21]{position:relative;width:100%;margin-top:6vw}.top-PLR[data-v-42c2db21]{position:relative;width:100%}.top-PLR>p[data-v-42c2db21]{font-family:PingFangSC-Semibold;font-size:6.4vw;color:#2e2e30;line-height:10vw}.LR-cont[data-v-42c2db21]{position:relative;width:100%;margin-top:8vw}.inputPhone-PLR[data-v-42c2db21]{position:relative;width:100%;margin-top:5vw}.inputYan-PLR[data-v-42c2db21]{position:relative;width:100%;margin-top:6vw}.yan-left-PLR[data-v-42c2db21]{position:relative;width:60%}.ma-right-PLR[data-v-42c2db21]{position:relative;width:40%}.yazm[data-v-42c2db21]{font-family:PingFangSC-Light;font-size:4vw;color:#ccc;line-height:12vw;text-align:right}.re-yazm[data-v-42c2db21]{font-family:PingFangSC-Light;font-size:4vw;color:#02c2a2;line-height:12vw;text-align:right}.switchPassWorld[data-v-42c2db21]{position:relative;width:100%}.switchPassWorld>p[data-v-42c2db21]{font-family:PingFangSC-Light;font-size:3.5vw;color:#02c2a2;line-height:12vw;width:50%}.passWord-LR[data-v-42c2db21]{position:relative;width:100%}.top-PWLR[data-v-42c2db21]{position:relative;width:%?150?%;margin-top:6vw;margin:auto}.top-PWLR>uni-image[data-v-42c2db21]{position:relative;width:%?150?%;width:100%}.nameLand[data-v-42c2db21]{font-family:PingFang-SC-Medium;font-size:%?36?%;color:#5d5d5d;letter-spacing:0;text-align:center;line-height:%?40?%;margin-top:%?30?%}.landBtn[data-v-42c2db21]{position:relative;width:100%;margin-top:%?100?%}.land-btn-box[data-v-42c2db21]{position:relative;width:%?550?%;height:%?90?%;margin-bottom:6vw;margin-top:%?100?%;font-size:%?32?%;color:#fff;letter-spacing:0;text-align:center;line-height:%?90?%;background:#02c2a2;margin:auto;border:none;border-radius:0}.land-btn-box>p[data-v-42c2db21]{font-family:PingFangSC-Regular;font-size:%?32?%;color:#fff;letter-spacing:0;text-align:center;line-height:%?90?%;background:#02c2a2;border-radius:0}.wx-land[data-v-42c2db21]{font-family:PingFangSC-Regular;font-size:4.266vw;color:#02c2a2!important;letter-spacing:0;text-align:center;line-height:12vw;border:1px solid #e2e2e2;background:#fff!important}.text-Right[data-v-42c2db21]{text-align:right}.skipLand[data-v-42c2db21]{position:relative;width:100%;margin-top:4vw}.skipLand>p[data-v-42c2db21]{position:relative;width:100%;text-align:center;font-size:4vw;line-height:12vw;color:#15d49f}",""])}}]);